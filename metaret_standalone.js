{var need$,read;(function (global){(need$=need$Impl);var has={},inline_workspace={};var readNative=((typeof read)==='function');(need$.read=(readNative?read:xhrGetSync));{if (((typeof codeparse)==='undefined')){if (((typeof acorn)==='undefined')){(function (root,mod){if (((((typeof exports)=="object"))&&(((typeof module)=="object"))))return mod(exports);if (((((typeof define)=="function"))&&(define.amd)))return define(["exports"],mod);mod(((root.acorn)||((root.acorn={}))));})(this,function (exports){"use strict";(exports.version="0.5.1");var options,input,inputLen,sourceFile;(exports.parse=function (inpt,opts){(input=String(inpt));(inputLen=input.length);setOptions(opts);initTokenState();return parseTopLevel(options.program);});var defaultOptions=(exports.defaultOptions={ecmaVersion:5,strictSemicolons:false,allowTrailingCommas:true,forbidReserved:false,allowReturnOutsideFunction:false,locations:false,onComment:null,ranges:false,program:null,sourceFile:null,directSourceFile:null,jsm:false});function setOptions(opts){(options=(opts||({})));for (var opt in defaultOptions)if (!Object.prototype.hasOwnProperty.call(options,opt))(options[opt]=defaultOptions[opt]);(sourceFile=((options.sourceFile)||null));}var getLineInfo=(exports.getLineInfo=function (input,offset){for(var line=1,cur=0;;){(lineBreak.lastIndex=cur);var match=lineBreak.exec(input);if ((match&&(((match.index)<offset)))){++line;(cur=((match.index)+(match[0].length)));} else break;}return {line:line,column:(offset-cur)};});(exports.tokenize=function (inpt,opts){(input=String(inpt));(inputLen=input.length);setOptions(opts);initTokenState();var t={};function getToken(forceRegexp){(lastEnd=tokEnd);readToken(forceRegexp);(t.start=tokStart);(t.end=tokEnd);(t.startLoc=tokStartLoc);(t.endLoc=tokEndLoc);(t.type=tokType);(t.value=tokVal);return t;}(getToken.jumpTo=function (pos,reAllowed){(tokPos=pos);if (options.locations){(tokCurLine=1);(tokLineStart=(lineBreak.lastIndex=0));var match;while ((((match=lineBreak.exec(input)))&&(((match.index)<pos)))){++tokCurLine;(tokLineStart=((match.index)+(match[0].length)));}}(tokRegexpAllowed=reAllowed);skipSpace();});return getToken;});var tokPos;var tokStart,tokEnd;var tokStartLoc,tokEndLoc;var tokType,tokVal;var tokRegexpAllowed;var tokCurLine,tokLineStart;var lastStart,lastEnd,lastEndLoc;var inFunction,labels,strict;var jsmInMetafun;function raise(pos,message){var loc=getLineInfo(input,pos);(message+=(((((((" ("+(loc.line)))+":"))+(loc.column)))+")"));var err=new SyntaxError(message);(err.pos=pos);(err.loc=loc);(err.raisedAt=tokPos);throw err;}var empty=[];var _num={type:"num"},_regexp={type:"regexp"},_string={type:"string"};var _name={type:"name"},_eof={type:"eof"};var _break={keyword:"break"},_case={keyword:"case",beforeExpr:true},_catch={keyword:"catch"};var _continue={keyword:"continue"},_debugger={keyword:"debugger"},_default={keyword:"default"};var _do={keyword:"do",isLoop:true},_else={keyword:"else",beforeExpr:true};var _finally={keyword:"finally"},_for={keyword:"for",isLoop:true},_function={keyword:"function"};var _if={keyword:"if"},_return={keyword:"return",beforeExpr:true},_switch={keyword:"switch"};var _throw={keyword:"throw",beforeExpr:true},_try={keyword:"try"},_var={keyword:"var"};var _while={keyword:"while",isLoop:true},_with={keyword:"with"},_new={keyword:"new",beforeExpr:true};var _this={keyword:"this"};var _jsm_metafun={keyword:"metafun"},_jsm_metaret={keyword:"metaret",beforeExpr:true},_jsm_inline={keyword:"inline"};var _null={keyword:"null",atomValue:null},_true={keyword:"true",atomValue:true};var _false={keyword:"false",atomValue:false};var _in={keyword:"in",binop:7,beforeExpr:true};var keywordTypes={"break":_break,"case":_case,"catch":_catch,"continue":_continue,"debugger":_debugger,"default":_default,"do":_do,"else":_else,"finally":_finally,"for":_for,"function":_function,"if":_if,"return":_return,"switch":_switch,"throw":_throw,"try":_try,"var":_var,"while":_while,"with":_with,"null":_null,"true":_true,"false":_false,"new":_new,"in":_in,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:true},"this":_this,"typeof":{keyword:"typeof",prefix:true,beforeExpr:true},"void":{keyword:"void",prefix:true,beforeExpr:true},"delete":{keyword:"delete",prefix:true,beforeExpr:true}};var jsmKeywordTypes={"metafun":_jsm_metafun,"metaret":_jsm_metaret,"inline":_jsm_inline};var _bracketL={type:"[",beforeExpr:true},_bracketR={type:"]"},_braceL={type:"{",beforeExpr:true};var _braceR={type:"}"},_parenL={type:"(",beforeExpr:true},_parenR={type:")"};var _comma={type:",",beforeExpr:true},_semi={type:";",beforeExpr:true};var _colon={type:":",beforeExpr:true},_dot={type:"."},_question={type:"?",beforeExpr:true};var _slash={binop:10,beforeExpr:true},_eq={isAssign:true,beforeExpr:true};var _assign={isAssign:true,beforeExpr:true};var _incDec={postfix:true,prefix:true,isUpdate:true},_prefix={prefix:true,beforeExpr:true};var _logicalOR={binop:1,beforeExpr:true};var _logicalAND={binop:2,beforeExpr:true};var _bitwiseOR={binop:3,beforeExpr:true};var _bitwiseXOR={binop:4,beforeExpr:true};var _bitwiseAND={binop:5,beforeExpr:true};var _equality={binop:6,beforeExpr:true};var _relational={binop:7,beforeExpr:true};var _bitShift={binop:8,beforeExpr:true};var _plusMin={binop:9,prefix:true,beforeExpr:true};var _multiplyModulo={binop:10,beforeExpr:true};(exports.tokTypes={bracketL:_bracketL,bracketR:_bracketR,braceL:_braceL,braceR:_braceR,parenL:_parenL,parenR:_parenR,comma:_comma,semi:_semi,colon:_colon,dot:_dot,question:_question,slash:_slash,eq:_eq,name:_name,eof:_eof,num:_num,regexp:_regexp,string:_string});for (var kw in keywordTypes)(exports.tokTypes[("_"+kw)]=keywordTypes[kw]);function makePredicate(words){(words=words.split(" "));var f="",cats=[];out:for(var i=0;(i<(words.length));++i){for(var j=0;(j<(cats.length));++j)if (((cats[j][0].length)==(words[i].length))){cats[j].push(words[i]);continue out;}cats.push([words[i]]);}function compareTo(arr){if (((arr.length)==1))return (f+=((("return str === "+(JSON.stringify(arr[0]))))+";"));(f+="switch(str){");for(var i=0;(i<(arr.length));++i)(f+=((("case "+(JSON.stringify(arr[i]))))+":"));(f+="return true}return false;");}if (((cats.length)>3)){cats.sort(function (a,b){return ((b.length)-(a.length));});(f+="switch(str.length){");for(var i=0;(i<(cats.length));++i){var cat=cats[i];(f+=((("case "+(cat[0].length)))+":"));compareTo(cat);}(f+="}");} else {compareTo(words);}return new Function("str",f);}var isReservedWord3=makePredicate("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile");var isReservedWord5=makePredicate("class enum extends super const export import");var isStrictReservedWord=makePredicate("implements interface let package private protected public static yield");var isStrictBadIdWord=makePredicate("eval arguments");var isKeyword=makePredicate("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this");var isKeywordJsm=makePredicate("metafun metaret inline");var nonASCIIwhitespace=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/;var nonASCIIidentifierStartChars="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc";var nonASCIIidentifierChars="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f";var nonASCIIidentifierStart=new RegExp(((("["+nonASCIIidentifierStartChars))+"]"));var nonASCIIidentifier=new RegExp(((((("["+nonASCIIidentifierStartChars))+nonASCIIidentifierChars))+"]"));var newline=/[\n\r\u2028\u2029]/;var lineBreak=/\r\n|[\n\r\u2028\u2029]/g;var isIdentifierStart=(exports.isIdentifierStart=function (code){if ((code<65))return (code===36);if ((code<91))return true;if ((code<97))return (code===95);if ((code<123))return true;return (((code>=0xaa))&&(nonASCIIidentifierStart.test(String.fromCharCode(code))));});var isIdentifierChar=(exports.isIdentifierChar=function (code){if ((code<48))return (code===36);if ((code<58))return true;if ((code<65))return false;if ((code<91))return true;if ((code<97))return (code===95);if ((code<123))return true;return (((code>=0xaa))&&(nonASCIIidentifier.test(String.fromCharCode(code))));});function Position(){(this.line=tokCurLine);(this.column=(tokPos-tokLineStart));}function initTokenState(){(tokCurLine=1);(tokPos=(tokLineStart=0));(tokRegexpAllowed=true);skipSpace();}function finishToken(type,val){(tokEnd=tokPos);if (options.locations)(tokEndLoc=new Position());(tokType=type);skipSpace();(tokVal=val);(tokRegexpAllowed=type.beforeExpr);}function skipBlockComment(){var startLoc=((((options.onComment)&&(options.locations)))&&(new Position()));var start=tokPos,end=input.indexOf("*/",(tokPos+=2));if ((end===(-1)))raise((tokPos-2),"Unterminated comment");(tokPos=(end+2));if (options.locations){(lineBreak.lastIndex=start);var match;while ((((match=lineBreak.exec(input)))&&(((match.index)<tokPos)))){++tokCurLine;(tokLineStart=((match.index)+(match[0].length)));}}if (options.onComment)options.onComment(true,input.slice((start+2),end),start,tokPos,startLoc,((options.locations)&&(new Position())));}function skipLineComment(){var start=tokPos;var startLoc=((((options.onComment)&&(options.locations)))&&(new Position()));var ch=input.charCodeAt((tokPos+=2));while ((((((((((tokPos<inputLen))&&((ch!==10))))&&((ch!==13))))&&((ch!==8232))))&&((ch!==8233)))){++tokPos;(ch=input.charCodeAt(tokPos));}if (options.onComment)options.onComment(false,input.slice((start+2),tokPos),start,tokPos,startLoc,((options.locations)&&(new Position())));}function skipSpace(){while ((tokPos<inputLen)){var ch=input.charCodeAt(tokPos);if ((ch===32)){++tokPos;} else if ((ch===13)){++tokPos;var next=input.charCodeAt(tokPos);if ((next===10)){++tokPos;}if (options.locations){++tokCurLine;(tokLineStart=tokPos);}} else if ((((((ch===10))||((ch===8232))))||((ch===8233)))){++tokPos;if (options.locations){++tokCurLine;(tokLineStart=tokPos);}} else if ((((ch>8))&&((ch<14)))){++tokPos;} else if ((ch===47)){var next=input.charCodeAt((tokPos+1));if ((next===42)){skipBlockComment();} else if ((next===47)){skipLineComment();} else break;} else if ((ch===160)){++tokPos;} else if ((((ch>=5760))&&(nonASCIIwhitespace.test(String.fromCharCode(ch))))){++tokPos;} else {break;}}}function readToken_dot(){var next=input.charCodeAt((tokPos+1));if ((((next>=48))&&((next<=57))))return readNumber(true);++tokPos;return finishToken(_dot);}function readToken_slash(){var next=input.charCodeAt((tokPos+1));if (tokRegexpAllowed){++tokPos;return readRegexp();}if ((next===61))return finishOp(_assign,2);return finishOp(_slash,1);}function readToken_mult_modulo(){var next=input.charCodeAt((tokPos+1));if ((next===61))return finishOp(_assign,2);return finishOp(_multiplyModulo,1);}function readToken_pipe_amp(code){var next=input.charCodeAt((tokPos+1));if ((next===code))return finishOp(((code===124)?_logicalOR:_logicalAND),2);if ((next===61))return finishOp(_assign,2);return finishOp(((code===124)?_bitwiseOR:_bitwiseAND),1);}function readToken_caret(){var next=input.charCodeAt((tokPos+1));if ((next===61))return finishOp(_assign,2);return finishOp(_bitwiseXOR,1);}function readToken_plus_min(code){var next=input.charCodeAt((tokPos+1));if ((next===code)){if ((((((next==45))&&(((input.charCodeAt((tokPos+2)))==62))))&&(newline.test(input.slice(lastEnd,tokPos))))){(tokPos+=3);skipLineComment();skipSpace();return readToken();}return finishOp(_incDec,2);}if ((next===61))return finishOp(_assign,2);return finishOp(_plusMin,1);}function readToken_lt_gt(code){var next=input.charCodeAt((tokPos+1));var size=1;if ((next===code)){(size=((((code===62))&&(((input.charCodeAt((tokPos+2)))===62)))?3:2));if (((input.charCodeAt((tokPos+size)))===61))return finishOp(_assign,(size+1));return finishOp(_bitShift,size);}if ((((((((next==33))&&((code==60))))&&(((input.charCodeAt((tokPos+2)))==45))))&&(((input.charCodeAt((tokPos+3)))==45)))){(tokPos+=4);skipLineComment();skipSpace();return readToken();}if ((next===61))(size=(((input.charCodeAt((tokPos+2)))===61)?3:2));return finishOp(_relational,size);}function readToken_eq_excl(code){var next=input.charCodeAt((tokPos+1));if ((next===61))return finishOp(_equality,(((input.charCodeAt((tokPos+2)))===61)?3:2));return finishOp(((code===61)?_eq:_prefix),1);}function getTokenFromCode(code){switch(code){case 46:return readToken_dot();case 40:++tokPos;return finishToken(_parenL);case 41:++tokPos;return finishToken(_parenR);case 59:++tokPos;return finishToken(_semi);case 44:++tokPos;return finishToken(_comma);case 91:++tokPos;return finishToken(_bracketL);case 93:++tokPos;return finishToken(_bracketR);case 123:++tokPos;return finishToken(_braceL);case 125:++tokPos;return finishToken(_braceR);case 58:++tokPos;return finishToken(_colon);case 63:++tokPos;return finishToken(_question);case 48:var next=input.charCodeAt((tokPos+1));if ((((next===120))||((next===88))))return readHexNumber();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return readNumber(false);case 34:case 39:return readString(code);case 47:return readToken_slash(code);case 37:case 42:return readToken_mult_modulo();case 124:case 38:return readToken_pipe_amp(code);case 94:return readToken_caret();case 43:case 45:return readToken_plus_min(code);case 60:case 62:return readToken_lt_gt(code);case 61:case 33:return readToken_eq_excl(code);case 126:return finishOp(_prefix,1);}return false;}function readToken(forceRegexp){if (!forceRegexp)(tokStart=tokPos); else (tokPos=(tokStart+1));if (options.locations)(tokStartLoc=new Position());if (forceRegexp)return readRegexp();if ((tokPos>=inputLen))return finishToken(_eof);var code=input.charCodeAt(tokPos);if (((isIdentifierStart(code))||((code===92))))return readWord();var tok=getTokenFromCode(code);if ((tok===false)){var ch=String.fromCharCode(code);if ((((ch==="\\"))||(nonASCIIidentifierStart.test(ch))))return readWord();raise(tokPos,((("Unexpected character '"+ch))+"'"));}return tok;}function finishOp(type,size){var str=input.slice(tokPos,(tokPos+size));(tokPos+=size);finishToken(type,str);}function readRegexp(){var content="",escaped,inClass,start=tokPos;for(;;){if ((tokPos>=inputLen))raise(start,"Unterminated regular expression");var ch=input.charAt(tokPos);if (newline.test(ch))raise(start,"Unterminated regular expression");if (!escaped){if ((ch==="["))(inClass=true); else if ((((ch==="]"))&&inClass))(inClass=false); else if ((((ch==="/"))&&(!inClass)))break;(escaped=(ch==="\\"));} else (escaped=false);++tokPos;}var content=input.slice(start,tokPos);++tokPos;var mods=readWord1();if ((mods&&(!/^[gmsiy]*$/.test(mods))))raise(start,"Invalid regular expression flag");try {var value=new RegExp(content,mods);}catch (e){if ((e instanceof SyntaxError))raise(start,("Error parsing regular expression: "+(e.message)));raise(e);}return finishToken(_regexp,value);}function readInt(radix,len){var start=tokPos,total=0;for(var i=0,e=((len==null)?Infinity:len);(i<e);++i){var code=input.charCodeAt(tokPos),val;if ((code>=97))(val=(((code-97))+10)); else if ((code>=65))(val=(((code-65))+10)); else if ((((code>=48))&&((code<=57))))(val=(code-48)); else (val=Infinity);if ((val>=radix))break;++tokPos;(total=(((total*radix))+val));}if ((((tokPos===start))||((((len!=null))&&((((tokPos-start))!==len))))))return null;return total;}function readHexNumber(){(tokPos+=2);var val=readInt(16);if ((val==null))raise((tokStart+2),"Expected hexadecimal number");if (isIdentifierStart(input.charCodeAt(tokPos)))raise(tokPos,"Identifier directly after number");return finishToken(_num,val);}function readNumber(startsWithDot){var start=tokPos,isFloat=false,octal=((input.charCodeAt(tokPos))===48);if (((!startsWithDot)&&(((readInt(10))===null))))raise(start,"Invalid number");if (((input.charCodeAt(tokPos))===46)){++tokPos;readInt(10);(isFloat=true);}var next=input.charCodeAt(tokPos);if ((((next===69))||((next===101)))){(next=input.charCodeAt(++tokPos));if ((((next===43))||((next===45))))++tokPos;if (((readInt(10))===null))raise(start,"Invalid number");(isFloat=true);}if (isIdentifierStart(input.charCodeAt(tokPos)))raise(tokPos,"Identifier directly after number");var str=input.slice(start,tokPos),val;if (isFloat)(val=parseFloat(str)); else if (((!octal)||(((str.length)===1))))(val=parseInt(str,10)); else if (((/[89]/.test(str))||strict))raise(start,"Invalid number"); else (val=parseInt(str,8));return finishToken(_num,val);}function readString(quote){tokPos++;var out="";for(;;){if ((tokPos>=inputLen))raise(tokStart,"Unterminated string constant");var ch=input.charCodeAt(tokPos);if ((ch===quote)){++tokPos;return finishToken(_string,out);}if ((ch===92)){(ch=input.charCodeAt(++tokPos));var octal=/^[0-7]+/.exec(input.slice(tokPos,(tokPos+3)));if (octal)(octal=octal[0]);while ((octal&&(((parseInt(octal,8))>255))))(octal=octal.slice(0,-1));if ((octal==="0"))(octal=null);++tokPos;if (octal){if (strict)raise((tokPos-2),"Octal literal in strict mode");(out+=String.fromCharCode(parseInt(octal,8)));(tokPos+=((octal.length)-1));} else {switch(ch){case 110:(out+="\n");break;case 114:(out+="\r");break;case 120:(out+=String.fromCharCode(readHexChar(2)));break;case 117:(out+=String.fromCharCode(readHexChar(4)));break;case 85:(out+=String.fromCharCode(readHexChar(8)));break;case 116:(out+="\t");break;case 98:(out+="\b");break;case 118:(out+="\u000b");break;case 102:(out+="\f");break;case 48:(out+="\0");break;case 13:if (((input.charCodeAt(tokPos))===10))++tokPos;case 10:if (options.locations){(tokLineStart=tokPos);++tokCurLine;}break;default:(out+=String.fromCharCode(ch));break;}}} else {if ((((((((ch===13))||((ch===10))))||((ch===8232))))||((ch===8233))))raise(tokStart,"Unterminated string constant");(out+=String.fromCharCode(ch));++tokPos;}}}function readHexChar(len){var n=readInt(16,len);if ((n===null))raise(tokStart,"Bad character escape sequence");return n;}var containsEsc;function readWord1(){(containsEsc=false);var word,first=true,start=tokPos;for(;;){var ch=input.charCodeAt(tokPos);if (isIdentifierChar(ch)){if (containsEsc)(word+=input.charAt(tokPos));++tokPos;} else if ((ch===92)){if (!containsEsc)(word=input.slice(start,tokPos));(containsEsc=true);if (((input.charCodeAt(++tokPos))!=117))raise(tokPos,"Expecting Unicode escape sequence \\uXXXX");++tokPos;var esc=readHexChar(4);var escStr=String.fromCharCode(esc);if (!escStr)raise((tokPos-1),"Invalid Unicode escape");if (!(first?isIdentifierStart(esc):isIdentifierChar(esc)))raise((tokPos-4),"Invalid Unicode escape");(word+=escStr);} else {break;}(first=false);}return (containsEsc?word:input.slice(start,tokPos));}function readWord(){var word=readWord1();var type=_name;if (!containsEsc){if (isKeyword(word))(type=keywordTypes[word]); else if (((options.jsm)&&(isKeywordJsm(word))))(type=jsmKeywordTypes[word]);}return finishToken(type,word);}function next(){(lastStart=tokStart);(lastEnd=tokEnd);(lastEndLoc=tokEndLoc);readToken();}function setStrict(strct){(strict=strct);(tokPos=tokStart);if (options.locations){while ((tokPos<tokLineStart)){(tokLineStart=((input.lastIndexOf("\n",(tokLineStart-2)))+1));--tokCurLine;}}skipSpace();readToken();}function Node(){(this.type=null);(this.start=tokStart);(this.end=null);}(exports.Node=Node);function SourceLocation(){(this.start=tokStartLoc);(this.end=null);if ((sourceFile!==null))(this.source=sourceFile);}function startNode(){var node=new Node();if (options.locations)(node.loc=new SourceLocation());if (options.directSourceFile)(node.sourceFile=options.directSourceFile);if (options.ranges)(node.range=[tokStart,0]);return node;}function startNodeFrom(other){var node=new Node();(node.start=other.start);if (options.locations){(node.loc=new SourceLocation());(node.loc.start=other.loc.start);}if (options.ranges)(node.range=[other.range[0],0]);return node;}function finishNode(node,type){(node.type=type);(node.end=lastEnd);if (options.locations)(node.loc.end=lastEndLoc);if (options.ranges)(node.range[1]=lastEnd);return node;}function isUseStrict(stmt){return ((((((((options.ecmaVersion)>=5))&&(((stmt.type)==="ExpressionStatement"))))&&(((stmt.expression.type)==="Literal"))))&&(((stmt.expression.value)==="use strict")));}function eat(type){if ((tokType===type)){next();return true;}}function canInsertSemicolon(){return ((!options.strictSemicolons)&&((((((tokType===_eof))||((tokType===_braceR))))||(newline.test(input.slice(lastEnd,tokStart))))));}function semicolon(){if (((!eat(_semi))&&(!canInsertSemicolon())))unexpected();}function expect(type){if ((tokType===type))next(); else unexpected();}function unexpected(){raise(tokStart,"Unexpected token");}function checkLVal(expr){if (((((expr.type)!=="Identifier"))&&(((expr.type)!=="MemberExpression"))))raise(expr.start,"Assigning to rvalue");if ((((strict&&(((expr.type)==="Identifier"))))&&(isStrictBadIdWord(expr.name))))raise(expr.start,((("Assigning to "+(expr.name)))+" in strict mode"));}function parseTopLevel(program){(lastStart=(lastEnd=tokPos));if (options.locations)(lastEndLoc=new Position());(inFunction=(strict=null));(labels=[]);readToken();var node=(program||(startNode())),first=true;if (!program)(node.body=[]);while ((tokType!==_eof)){var stmt=parseStatement();node.body.push(stmt);if ((first&&(isUseStrict(stmt))))setStrict(true);(first=false);}return finishNode(node,"Program");}var loopLabel={kind:"loop"},switchLabel={kind:"switch"};function parseStatement(){if ((((tokType===_slash))||((((tokType===_assign))&&((tokVal=="/="))))))readToken(true);var starttype=tokType,node=startNode();switch(starttype){case _break:case _continue:next();var isBreak=(starttype===_break);if (((eat(_semi))||(canInsertSemicolon())))(node.label=null); else if ((tokType!==_name))unexpected(); else {(node.label=parseIdent());semicolon();}for(var i=0;(i<(labels.length));++i){var lab=labels[i];if (((((node.label)==null))||(((lab.name)===(node.label.name))))){if (((((lab.kind)!=null))&&((isBreak||(((lab.kind)==="loop"))))))break;if (((node.label)&&isBreak))break;}}if ((i===(labels.length)))raise(node.start,("Unsyntactic "+(starttype.keyword)));return finishNode(node,(isBreak?"BreakStatement":"ContinueStatement"));case _debugger:next();semicolon();return finishNode(node,"DebuggerStatement");case _do:next();labels.push(loopLabel);(node.body=parseStatement());labels.pop();expect(_while);(node.test=parseParenExpression());semicolon();return finishNode(node,"DoWhileStatement");case _for:next();labels.push(loopLabel);expect(_parenL);if ((tokType===_semi))return parseFor(node,null);if ((tokType===_var)){var init=startNode();next();parseVar(init,true);finishNode(init,"VariableDeclaration");if (((((init.declarations.length)===1))&&(eat(_in))))return parseForIn(node,init);return parseFor(node,init);}var init=parseExpression(false,true);if (eat(_in)){checkLVal(init);return parseForIn(node,init);}return parseFor(node,init);case _function:next();return parseFunction(node,true);case _if:next();(node.test=parseParenExpression());(node.consequent=parseStatement());(node.alternate=(eat(_else)?parseStatement():null));return finishNode(node,"IfStatement");case _jsm_inline:next();return parseJsmInline(node);case _jsm_metafun:next();return parseJsmMetafun(node,true);case _jsm_metaret:if (((!jsmInMetafun)&&(!options.jsmAllowMetaretOutsideFunction)))raise(tokStart,"'metaret' outside of metafun");next();if (((eat(_semi))||(canInsertSemicolon())))(node.argument=null); else {(node.argument=parseExpression());semicolon();}return finishNode(node,"JsmMetaretStatement");case _return:if (((!inFunction)&&(!options.allowReturnOutsideFunction)))raise(tokStart,"'return' outside of function");next();if (((eat(_semi))||(canInsertSemicolon())))(node.argument=null); else {(node.argument=parseExpression());semicolon();}return finishNode(node,"ReturnStatement");case _switch:next();(node.discriminant=parseParenExpression());(node.cases=[]);expect(_braceL);labels.push(switchLabel);for(var cur,sawDefault;(tokType!=_braceR);){if ((((tokType===_case))||((tokType===_default)))){var isCase=(tokType===_case);if (cur)finishNode(cur,"SwitchCase");node.cases.push((cur=startNode()));(cur.consequent=[]);next();if (isCase)(cur.test=parseExpression()); else {if (sawDefault)raise(lastStart,"Multiple default clauses");(sawDefault=true);(cur.test=null);}expect(_colon);} else {if (!cur)unexpected();cur.consequent.push(parseStatement());}}if (cur)finishNode(cur,"SwitchCase");next();labels.pop();return finishNode(node,"SwitchStatement");case _throw:next();if (newline.test(input.slice(lastEnd,tokStart)))raise(lastEnd,"Illegal newline after throw");(node.argument=parseExpression());semicolon();return finishNode(node,"ThrowStatement");case _try:next();(node.block=parseBlock());(node.handler=null);if ((tokType===_catch)){var clause=startNode();next();expect(_parenL);(clause.param=parseIdent());if ((strict&&(isStrictBadIdWord(clause.param.name))))raise(clause.param.start,((("Binding "+(clause.param.name)))+" in strict mode"));expect(_parenR);(clause.guard=null);(clause.body=parseBlock());(node.handler=finishNode(clause,"CatchClause"));}(node.guardedHandlers=empty);(node.finalizer=(eat(_finally)?parseBlock():null));if (((!node.handler)&&(!node.finalizer)))raise(node.start,"Missing catch or finally clause");return finishNode(node,"TryStatement");case _var:next();parseVar(node);semicolon();return finishNode(node,"VariableDeclaration");case _while:next();(node.test=parseParenExpression());labels.push(loopLabel);(node.body=parseStatement());labels.pop();return finishNode(node,"WhileStatement");case _with:if (strict)raise(tokStart,"'with' in strict mode");next();(node.object=parseParenExpression());(node.body=parseStatement());return finishNode(node,"WithStatement");case _braceL:return parseBlock();case _semi:next();return finishNode(node,"EmptyStatement");default:var maybeName=tokVal,expr=parseExpression();if ((((((starttype===_name))&&(((expr.type)==="Identifier"))))&&(eat(_colon)))){for(var i=0;(i<(labels.length));++i)if (((labels[i].name)===maybeName))raise(expr.start,((("Label '"+maybeName))+"' is already declared"));var kind=(tokType.isLoop?"loop":((tokType===_switch)?"switch":null));labels.push({name:maybeName,kind:kind});(node.body=parseStatement());labels.pop();(node.label=expr);return finishNode(node,"LabeledStatement");} else {(node.expression=expr);semicolon();return finishNode(node,"ExpressionStatement");}}}function parseParenExpression(){expect(_parenL);var val=parseExpression();expect(_parenR);return val;}function parseBlock(allowStrict){var node=startNode(),first=true,strict=false,oldStrict;(node.body=[]);expect(_braceL);while (!eat(_braceR)){var stmt=parseStatement();node.body.push(stmt);if ((((first&&allowStrict))&&(isUseStrict(stmt)))){(oldStrict=strict);setStrict((strict=true));}(first=false);}if ((strict&&(!oldStrict)))setStrict(false);return finishNode(node,"BlockStatement");}function parseFor(node,init){(node.init=init);expect(_semi);(node.test=((tokType===_semi)?null:parseExpression()));expect(_semi);(node.update=((tokType===_parenR)?null:parseExpression()));expect(_parenR);(node.body=parseStatement());labels.pop();return finishNode(node,"ForStatement");}function parseForIn(node,init){(node.left=init);(node.right=parseExpression());expect(_parenR);(node.body=parseStatement());labels.pop();return finishNode(node,"ForInStatement");}function parseJsmInline(node){if ((tokType===_var)){var varDecl=parseStatement();if (((varDecl.type)!=="VariableDeclaration"))throw new Error("parseJsmInline: incorrect variable declaration.");if (((varDecl.declarations.length)!==1))throw new Error("parseJsmInline: VariableDeclaration: only a single variable declaration!");var d=varDecl.declarations[0];(node.jsmVarDeclId=d.id);(node.jsmVarDeclInit=d.init);if (((node.jsmVarDeclInit.type)!=="CallExpression"))throw new Error("parseJsmInline: VariableDeclaration: only the form 'inline var x = f(); is permitted.");} else {var stmt=parseStatement();if (((stmt.type)!=="ExpressionStatement"))throw new Error("parseJsmInline: ExpressionStatement: either var or expression stmt.");var expr=stmt.expression,expr_type=expr.type;if ((((expr_type!=="AssignmentExpression"))&&((expr_type!=="CallExpression"))))throw new Error("parseJsmInline: ExpressionStatement: either AssignmentExpression or CallExpression!");if ((expr_type==="AssignmentExpression")){if (((((expr.left.type)!=="Identifier"))||(((expr.right.type)!=="CallExpression"))))throw new Error("parseJsmInline: ExpressionStatement: only the form 'inline x = f(); is permitted.");(node.jsmAssignLeft=expr.left);(node.jsmAssignRight=expr.right);} else {(node.jsmCall=expr);}}return finishNode(node,"JsmInlineStatement");}function parseVar(node,noIn){(node.declarations=[]);(node.kind="var");for(;;){var decl=startNode();(decl.id=parseIdent());if ((strict&&(isStrictBadIdWord(decl.id.name))))raise(decl.id.start,((("Binding "+(decl.id.name)))+" in strict mode"));(decl.init=(eat(_eq)?parseExpression(true,noIn):null));node.declarations.push(finishNode(decl,"VariableDeclarator"));if (!eat(_comma))break;}return node;}function parseExpression(noComma,noIn){var expr=parseMaybeAssign(noIn);if (((!noComma)&&((tokType===_comma)))){var node=startNodeFrom(expr);(node.expressions=[expr]);while (eat(_comma))node.expressions.push(parseMaybeAssign(noIn));return finishNode(node,"SequenceExpression");}return expr;}function parseMaybeAssign(noIn){var left=parseMaybeConditional(noIn);if (tokType.isAssign){var node=startNodeFrom(left);(node.operator=tokVal);(node.left=left);next();(node.right=parseMaybeAssign(noIn));checkLVal(left);return finishNode(node,"AssignmentExpression");}return left;}function parseMaybeConditional(noIn){var expr=parseExprOps(noIn);if (eat(_question)){var node=startNodeFrom(expr);(node.test=expr);(node.consequent=parseExpression(true));expect(_colon);(node.alternate=parseExpression(true,noIn));return finishNode(node,"ConditionalExpression");}return expr;}function parseExprOps(noIn){return parseExprOp(parseMaybeUnary(),-1,noIn);}function parseExprOp(left,minPrec,noIn){var prec=tokType.binop;if ((((prec!=null))&&(((!noIn)||((tokType!==_in)))))){if ((prec>minPrec)){var node=startNodeFrom(left);(node.left=left);(node.operator=tokVal);var op=tokType;next();(node.right=parseExprOp(parseMaybeUnary(),prec,noIn));var exprNode=finishNode(node,((((op===_logicalOR))||((op===_logicalAND)))?"LogicalExpression":"BinaryExpression"));return parseExprOp(exprNode,minPrec,noIn);}}return left;}function parseMaybeUnary(){if (tokType.prefix){var node=startNode(),update=tokType.isUpdate;(node.operator=tokVal);(node.prefix=true);(tokRegexpAllowed=true);next();(node.argument=parseMaybeUnary());if (update)checkLVal(node.argument); else if ((((strict&&(((node.operator)==="delete"))))&&(((node.argument.type)==="Identifier"))))raise(node.start,"Deleting local variable in strict mode");return finishNode(node,(update?"UpdateExpression":"UnaryExpression"));}var expr=parseExprSubscripts();while (((tokType.postfix)&&(!canInsertSemicolon()))){var node=startNodeFrom(expr);(node.operator=tokVal);(node.prefix=false);(node.argument=expr);checkLVal(expr);next();(expr=finishNode(node,"UpdateExpression"));}return expr;}function parseExprSubscripts(){return parseSubscripts(parseExprAtom());}function parseSubscripts(base,noCalls){if (eat(_dot)){var node=startNodeFrom(base);(node.object=base);(node.property=parseIdent(true));(node.computed=false);return parseSubscripts(finishNode(node,"MemberExpression"),noCalls);} else if (eat(_bracketL)){var node=startNodeFrom(base);(node.object=base);(node.property=parseExpression());(node.computed=true);expect(_bracketR);return parseSubscripts(finishNode(node,"MemberExpression"),noCalls);} else if (((!noCalls)&&(eat(_parenL)))){var node=startNodeFrom(base);(node.callee=base);(node.arguments=parseExprList(_parenR,false));return parseSubscripts(finishNode(node,"CallExpression"),noCalls);} else return base;}function parseExprAtom(){switch(tokType){case _this:var node=startNode();next();return finishNode(node,"ThisExpression");case _name:return parseIdent();case _num:case _string:case _regexp:var node=startNode();(node.value=tokVal);(node.raw=input.slice(tokStart,tokEnd));next();return finishNode(node,"Literal");case _null:case _true:case _false:var node=startNode();(node.value=tokType.atomValue);(node.raw=tokType.keyword);next();return finishNode(node,"Literal");case _parenL:var tokStartLoc1=tokStartLoc,tokStart1=tokStart;next();var val=parseExpression();(val.start=tokStart1);(val.end=tokEnd);if (options.locations){(val.loc.start=tokStartLoc1);(val.loc.end=tokEndLoc);}if (options.ranges)(val.range=[tokStart1,tokEnd]);expect(_parenR);return val;case _bracketL:var node=startNode();next();(node.elements=parseExprList(_bracketR,true,true));return finishNode(node,"ArrayExpression");case _braceL:return parseObj();case _function:var node=startNode();next();return parseFunction(node,false);case _new:return parseNew();default:unexpected();}}function parseNew(){var node=startNode();next();(node.callee=parseSubscripts(parseExprAtom(),true));if (eat(_parenL))(node.arguments=parseExprList(_parenR,false)); else (node.arguments=empty);return finishNode(node,"NewExpression");}function parseObj(){var node=startNode(),first=true,sawGetSet=false;(node.properties=[]);next();while (!eat(_braceR)){if (!first){expect(_comma);if (((options.allowTrailingCommas)&&(eat(_braceR))))break;} else (first=false);var prop={key:parsePropertyName()},isGetSet=false,kind;if (eat(_colon)){(prop.value=parseExpression(true));(kind=(prop.kind="init"));} else if (((((((options.ecmaVersion)>=5))&&(((prop.key.type)==="Identifier"))))&&(((((prop.key.name)==="get"))||(((prop.key.name)==="set")))))){(isGetSet=(sawGetSet=true));(kind=(prop.kind=prop.key.name));(prop.key=parsePropertyName());if ((tokType!==_parenL))unexpected();(prop.value=parseFunction(startNode(),false));} else unexpected();if (((((prop.key.type)==="Identifier"))&&((strict||sawGetSet)))){for(var i=0;(i<(node.properties.length));++i){var other=node.properties[i];if (((other.key.name)===(prop.key.name))){var conflict=(((((kind==(other.kind)))||((isGetSet&&(((other.kind)==="init"))))))||((((kind==="init"))&&(((((other.kind)==="get"))||(((other.kind)==="set")))))));if ((((((conflict&&(!strict)))&&((kind==="init"))))&&(((other.kind)==="init"))))(conflict=false);if (conflict)raise(prop.key.start,"Redefinition of property");}}}node.properties.push(prop);}return finishNode(node,"ObjectExpression");}function parsePropertyName(){if ((((tokType===_num))||((tokType===_string))))return parseExprAtom();return parseIdent(true);}function parseJsmMetafun(node,isStatement){if (!isStatement)throw new Error('metafunction can only be declarations, not expressions.');var isJsmMetafunction=true;return parseFunction(node,isStatement,isJsmMetafunction);}function parseFunction(node,isStatement,isJsmMetafunction){if (!isJsmMetafunction){if ((tokType===_name))(node.id=parseIdent()); else if (isStatement)unexpected(); else (node.id=null);} else {if ((tokType!==_name))unexpected();(node.id=parseJsmIdentifierOrDottedIdentifer());}(node.params=[]);var first=true;expect(_parenL);while (!eat(_parenR)){if (!first)expect(_comma); else (first=false);node.params.push(parseIdent());}var oldInFunc=inFunction,oldLabels=labels,oldJsmInMetafun=jsmInMetafun;(inFunction=true);(labels=[]);(jsmInMetafun=isJsmMetafunction);(node.body=parseBlock(true));(inFunction=oldInFunc);(labels=oldLabels);(jsmInMetafun=oldJsmInMetafun);if ((strict||(((node.body.body.length)&&(isUseStrict(node.body.body[0])))))){for(var i=(node.id?-1:0);(i<(node.params.length));++i){var id=((i<0)?node.id:node.params[i]);if (((isStrictReservedWord(id.name))||(isStrictBadIdWord(id.name))))raise(id.start,((("Defining '"+(id.name)))+"' in strict mode"));if ((i>=0))for(var j=0;(j<i);++j)if (((id.name)===(node.params[j].name)))raise(id.start,"Argument name clash in strict mode");}}return finishNode(node,(((isJsmMetafunction?'JsmMetafun':'Function'))+((isStatement?"Declaration":"Expression"))));}function parseExprList(close,allowTrailingComma,allowEmpty){var elts=[],first=true;while (!eat(close)){if (!first){expect(_comma);if ((((allowTrailingComma&&(options.allowTrailingCommas)))&&(eat(close))))break;} else (first=false);if ((allowEmpty&&((tokType===_comma))))elts.push(null); else elts.push(parseExpression(true));}return elts;}function parseJsmIdentifierOrDottedIdentifer(liberal){return parseIdent(liberal,true);}function parseIdent(liberal,jsmDotted){var node=startNode();if ((liberal&&(((options.forbidReserved)=="everywhere"))))(liberal=false);if ((tokType===_name)){if (((((!liberal)&&(((((options.forbidReserved)&&((((options.ecmaVersion)===3)?isReservedWord3:isReservedWord5)(tokVal))))||((strict&&(isStrictReservedWord(tokVal))))))))&&(((input.slice(tokStart,tokEnd).indexOf("\\"))==(-1)))))raise(tokStart,((("The keyword '"+tokVal))+"' is reserved"));(node.name=tokVal);} else if ((liberal&&(tokType.keyword))){(node.name=tokType.keyword);} else {unexpected();}(tokRegexpAllowed=false);next();if ((jsmDotted&&(eat(_dot)))){var jsmNameArr=[node.name];var jsmRest=parseIdent(liberal,jsmDotted);jsmNameArr.push.apply(jsmNameArr,((jsmRest.jsmNameArr)||([jsmRest.name])));(node.jsmNameArr=jsmNameArr);(node.name=jsmNameArr.join('.'));return finishNode(node,"JsmDottedIdentifier");}return finishNode(node,"Identifier");}});}if (((typeof acorn.walk)==='undefined')){(function (mod){if (((((typeof exports)=="object"))&&(((typeof module)=="object"))))return mod(exports);if (((((typeof define)=="function"))&&(define.amd)))return define(["exports"],mod);mod((((this.acorn)||((this.acorn={}))).walk={}));})(function (exports){"use strict";(exports.simple=function (node,visitors,base,state){if (!base)(base=exports.base);function c(node,st,override){var type=(override||(node.type)),found=visitors[type];base[type](node,st,c);if (found)found(node,st);}c(node,state);});(exports.ancestor=function (node,visitors,base,state){if (!base)(base=exports.base);if (!state)(state=[]);function c(node,st,override){var type=(override||(node.type)),found=visitors[type];if ((node!=(st[((st.length)-1)]))){(st=st.slice());st.push(node);}base[type](node,st,c);if (found)found(node,st);}c(node,state);});(exports.recursive=function (node,state,funcs,base){var visitor=(funcs?exports.make(funcs,base):base);function c(node,st,override){visitor[(override||(node.type))](node,st,c);}c(node,state);});function makeTest(test){if (((typeof test)=="string"))return function (type){return (type==test);}; else if (!test)return function (){return true;}; else return test;}function Found(node,state){(this.node=node);(this.state=state);}(exports.findNodeAt=function (node,start,end,test,base,state){(test=makeTest(test));try {if (!base)(base=exports.base);var c=function (node,st,override){var type=(override||(node.type));if ((((((start==null))||(((node.start)<=start))))&&((((end==null))||(((node.end)>=end))))))base[type](node,st,c);if (((((test(type,node))&&((((start==null))||(((node.start)==start))))))&&((((end==null))||(((node.end)==end))))))throw new Found(node,st);};c(node,state);}catch (e){if ((e instanceof Found))return e;throw e;}});(exports.findNodeAround=function (node,pos,test,base,state){(test=makeTest(test));try {if (!base)(base=exports.base);var c=function (node,st,override){var type=(override||(node.type));if (((((node.start)>pos))||(((node.end)<pos))))return;base[type](node,st,c);if (test(type,node))throw new Found(node,st);};c(node,state);}catch (e){if ((e instanceof Found))return e;throw e;}});(exports.findNodeAfter=function (node,pos,test,base,state){(test=makeTest(test));try {if (!base)(base=exports.base);var c=function (node,st,override){if (((node.end)<pos))return;var type=(override||(node.type));if (((((node.start)>=pos))&&(test(type,node))))throw new Found(node,st);base[type](node,st,c);};c(node,state);}catch (e){if ((e instanceof Found))return e;throw e;}});(exports.findNodeBefore=function (node,pos,test,base,state){(test=makeTest(test));if (!base)(base=exports.base);var max;var c=function (node,st,override){if (((node.start)>pos))return;var type=(override||(node.type));if (((((((node.end)<=pos))&&(((!max)||(((max.node.end)<(node.end)))))))&&(test(type,node))))(max=new Found(node,st));base[type](node,st,c);};c(node,state);return max;});(exports.make=function (funcs,base){if (!base)(base=exports.base);var visitor={};for (var type in base)(visitor[type]=base[type]);for (var type in funcs)(visitor[type]=funcs[type]);return visitor;});function skipThrough(node,st,c){c(node,st);}function ignore(_node,_st,_c){}var base=(exports.base={});(base.Program=(base.BlockStatement=function (node,st,c){for(var i=0;(i<(node.body.length));++i)c(node.body[i],st,"Statement");}));(base.Statement=skipThrough);(base.EmptyStatement=ignore);(base.ExpressionStatement=function (node,st,c){c(node.expression,st,"Expression");});(base.IfStatement=function (node,st,c){c(node.test,st,"Expression");c(node.consequent,st,"Statement");if (node.alternate)c(node.alternate,st,"Statement");});(base.LabeledStatement=function (node,st,c){c(node.body,st,"Statement");});(base.BreakStatement=(base.ContinueStatement=ignore));(base.WithStatement=function (node,st,c){c(node.object,st,"Expression");c(node.body,st,"Statement");});(base.SwitchStatement=function (node,st,c){c(node.discriminant,st,"Expression");for(var i=0;(i<(node.cases.length));++i){var cs=node.cases[i];if (cs.test)c(cs.test,st,"Expression");for(var j=0;(j<(cs.consequent.length));++j)c(cs.consequent[j],st,"Statement");}});(base.ReturnStatement=function (node,st,c){if (node.argument)c(node.argument,st,"Expression");});(base.ThrowStatement=function (node,st,c){c(node.argument,st,"Expression");});(base.TryStatement=function (node,st,c){c(node.block,st,"Statement");if (node.handler)c(node.handler.body,st,"ScopeBody");if (node.finalizer)c(node.finalizer,st,"Statement");});(base.WhileStatement=function (node,st,c){c(node.test,st,"Expression");c(node.body,st,"Statement");});(base.DoWhileStatement=base.WhileStatement);(base.ForStatement=function (node,st,c){if (node.init)c(node.init,st,"ForInit");if (node.test)c(node.test,st,"Expression");if (node.update)c(node.update,st,"Expression");c(node.body,st,"Statement");});(base.ForInStatement=function (node,st,c){c(node.left,st,"ForInit");c(node.right,st,"Expression");c(node.body,st,"Statement");});(base.ForInit=function (node,st,c){if (((node.type)=="VariableDeclaration"))c(node,st); else c(node,st,"Expression");});(base.DebuggerStatement=ignore);(base.FunctionDeclaration=function (node,st,c){c(node,st,"Function");});(base.VariableDeclaration=function (node,st,c){for(var i=0;(i<(node.declarations.length));++i){var decl=node.declarations[i];if (decl.init)c(decl.init,st,"Expression");}});(base.Function=function (node,st,c){c(node.body,st,"ScopeBody");});(base.ScopeBody=function (node,st,c){c(node,st,"Statement");});(base.Expression=skipThrough);(base.ThisExpression=ignore);(base.ArrayExpression=function (node,st,c){for(var i=0;(i<(node.elements.length));++i){var elt=node.elements[i];if (elt)c(elt,st,"Expression");}});(base.ObjectExpression=function (node,st,c){for(var i=0;(i<(node.properties.length));++i)c(node.properties[i].value,st,"Expression");});(base.FunctionExpression=base.FunctionDeclaration);(base.SequenceExpression=function (node,st,c){for(var i=0;(i<(node.expressions.length));++i)c(node.expressions[i],st,"Expression");});(base.UnaryExpression=(base.UpdateExpression=function (node,st,c){c(node.argument,st,"Expression");}));(base.BinaryExpression=(base.AssignmentExpression=(base.LogicalExpression=function (node,st,c){c(node.left,st,"Expression");c(node.right,st,"Expression");})));(base.ConditionalExpression=function (node,st,c){c(node.test,st,"Expression");c(node.consequent,st,"Expression");c(node.alternate,st,"Expression");});(base.NewExpression=(base.CallExpression=function (node,st,c){c(node.callee,st,"Expression");if (node.arguments)for(var i=0;(i<(node.arguments.length));++i)c(node.arguments[i],st,"Expression");}));(base.MemberExpression=function (node,st,c){c(node.object,st,"Expression");if (node.computed)c(node.property,st,"Expression");});(base.Identifier=(base.Literal=ignore));(base.JsmMetafunDeclaration=function (node,st,c){c(node,st,"Function");});(base.JsmFunctionDeclaration=function (node,st,c){c(node,st,"Function");});(base.JsmMetaretStatement=function (node,st,c){c(node.argument,st,"Expression");});(base.JsmInlineStatement=function (node,st,c){if (node.jsmVarDeclId){c(node.jsmVarDeclId,st);c(node.jsmVarDeclInit,st);} else if (node.jsmAssignLeft){c(node.jsmAssignLeft,st);c(node.jsmAssignRight,st);} else {c(node.jsmCall,st);}});function makeScope(prev,isCatch){return {vars:Object.create(null),prev:prev,isCatch:isCatch};}function normalScope(scope){while (scope.isCatch)(scope=scope.prev);return scope;}(exports.scopeVisitor=exports.make({Function:function (node,scope,c){var inner=makeScope(scope);for(var i=0;(i<(node.params.length));++i)(inner.vars[node.params[i].name]={type:"argument",node:node.params[i]});if (node.id){var decl=((node.type)=="FunctionDeclaration");((decl?normalScope(scope):inner).vars[node.id.name]={type:(decl?"function":"function name"),node:node.id});}c(node.body,inner,"ScopeBody");},TryStatement:function (node,scope,c){c(node.block,scope,"Statement");if (node.handler){var inner=makeScope(scope,true);(inner.vars[node.handler.param.name]={type:"catch clause",node:node.handler.param});c(node.handler.body,inner,"ScopeBody");}if (node.finalizer)c(node.finalizer,scope,"Statement");},VariableDeclaration:function (node,scope,c){var target=normalScope(scope);for(var i=0;(i<(node.declarations.length));++i){var decl=node.declarations[i];(target.vars[decl.id.name]={type:"var",node:decl.id});if (decl.init)c(decl.init,scope,"Expression");}}}));});}(function (global){var RETURN='return',VAR='var',RESERVED_ARR=["break","case","catch","continue","debugger","default","delete","do","else","finally","for","function","if","in","instanceof","new",RETURN,"switch","this","throw","try","typeof",VAR,"void","while","with","class","const","enum","export","extends","import","super","implements","interface","let","package","private","protected","public","static","yield"],EXTRA_BRACKET_ARR=[{open:RETURN,close:';',typebracket:RETURN,ignore_unbalanced:true},{open:VAR,close:[';','in'],typebracket:VAR,ignore_unbalanced:true}],_emptyObj={};(global.codeparse=codeparse);(codeparse.getDefaultReservedArr=getDefaultReservedArr);function getDefaultReservedArr(){return [].concat(RESERVED_ARR);}function codeparse(code,opt){var reservedArr=(((opt&&(opt.reservedArr)))||RESERVED_ARR).concat((((opt&&(opt.extraReservedArr)))||([]))),extraBracketArr=EXTRA_BRACKET_ARR.concat((((opt&&(opt.extraBracketArr)))||([]))),ret={strArr:[],commentArr:[],regexpArr:[],callArr:[],dotArr:[],dotcallArr:[],identifierArr:[],identifierArrReverse:[],identifierObj:{},identifierObjReverse:{},callObj:{},bracketcurlyArr:[],bracketroundArr:[],bracketsquareArr:[],bracketextraArr:[],bracketArr:[],bracketTree:[],functionDeclarationArr:[],functionExpressionArr:[],jsmMetafunArr:[],jsmMetaretArr:[],jsmInlineArr:[],rawAP:null},nakedCode=code;var cA=ret.commentArr,ap=(ret.rawAP=acorn.parse(code,{jsm:true,onComment:pushComment,jsmAllowMetaretOutsideFunction:(opt&&(opt.jsmAllowMetaretOutsideFunction)),allowReturnOutsideFunction:(opt&&(opt.allowReturnOutsideFunction))}));function pushComment(b,t,start,end){cA.push({begin:start,str:code.substring(start,end)});(nakedCode=((((nakedCode.substring(0,start))+(str_repli(' ',(end-start)))))+(nakedCode.substring(end))));}var tmp,caA=ret.callArr,dA=ret.dotArr,dcaA=ret.dotcallArr,iA=ret.identifierArr,rxA=ret.regexpArr,sA=ret.strArr,fdA=ret.functionDeclarationArr,feA=ret.functionExpressionArr,jMFA=ret.jsmMetafunArr,jMRA=ret.jsmMetaretArr,jINA=ret.jsmInlineArr,nakedCodeNoStrNoRx=nakedCode;acorn.walk.simple(ap,{CallExpression:meet_CallExpression,FunctionDeclaration:meet_FunctionDeclaration,FunctionExpression:meet_FunctionExpression,Identifier:meet_Identifier,JsmInlineStatement:meet_JsmInlineStatement,JsmMetafunDeclaration:meet_JsmMetafunDeclaration,JsmMetafunExpression:meet_JsmMetafunExpression,Literal:meet_Literal,MemberExpression:meet_MemberExpression,NewExpression:meet_NewExpression,ObjectExpression:meet_ObjectExpression,ThisExpression:meet_ThisExpression,VariableDeclaration:meet_VariableDeclaration});caA.sort(compare_begin);dA.sort(compare_begin);dcaA.sort(compare_begin);iA.sort(compare_begin);rxA.sort(compare_begin);sA.sort(compare_begin);function meet_CallExpression(node){var callee=node.callee;if (((callee.type)==="Identifier")){var begin=callee.start,parI=nakedCode.indexOf("(",callee.end);if ((parI<0))throw new Error('meet_CallExpression bug');var str=code.substring(begin,(parI+1));caA.push({begin:begin,str:str,name:callee.name,acornNode:node});for(var i=iA.length;i--;){if ((callee===(iA[i].acornNode))){iA.splice(i,1);break;} else if (((iA[i].begin)<(callee.start))){break;}}} else if (((callee.type)==="MemberExpression")){var cp=callee.property,name=cp.name,prop_begin=nakedCode.lastIndexOf((callee.computed?"[":"."),cp.start),prop_end=(callee.computed?nakedCode.indexOf("]",cp.end):cp.end),parI=nakedCode.indexOf("(",prop_end);if ((((((((prop_begin<0))||((prop_end<0))))||((prop_end<prop_begin))))||((parI<0))))throw new Error('meet_CallExpression bug');dcaA.push({begin:prop_begin,str:code.substring(prop_begin,(parI+1)),name:name,acornNode:node});for(var i=dA.length;i--;){if ((cp===(dA[i].acornNode))){dA.splice(i,1);break;} else if (((dA[i].begin)<(cp.start))){break;}}} else if (/Expression$/.test(callee.type)){} else throw new Error("bug");}function meet_NewExpression(node){if (node.arguments.length)meet_CallExpression(node);}function meet_FunctionDeclaration(node){var name=node.id.name;(name||0).substring.call.a;var begin=node.id.start;begin.toPrecision.call.a;var parI=nakedCode.indexOf("(",node.id.end),str=nakedCode.substring(begin,(parI+1));caA.push({begin:begin,str:str,name:name,acornNode:node});node.params.forEach(meet_Identifier);fdA.push({begin:node.start,str:nakedCode.substring(node.start,node.end),type:node.type,name:name,acornNode:node});}function meet_FunctionExpression(node){node.params.forEach(meet_Identifier);var begin=node.start,end=node.end,str;while (!/^function/.test((str=nakedCode.substring(begin,end)))){var mo_begin=/^\s*\(\s*/.exec(str),mo_end=/\s*\)\s*$/.exec(str);(begin+=mo_begin[0].length);(end-=mo_end[0].length);if ((begin>end))throw new Error('bug');}feA.push({begin:begin,str:str,type:node.type,name:(node.id?node.id.name:''),acornNode:node});}function meet_JsmInlineStatement(node){jINA.push({begin:node.start,end:node.end,str:nakedCode.substring(node.start,node.end),type:node.type,name:'inline',acornNode:node});}function meet_JsmMetafunDeclaration(node){var name=node.id.name;(name||0).substring.call.a;jMFA.push({begin:node.start,str:nakedCode.substring(node.start,node.end),type:node.type,name:name,acornNode:node});}function meet_JsmMetafunExpression(node){}function meet_Identifier(node){iA.push({begin:node.start,str:node.name,name:node.name,acornNode:node});}function meet_Literal(node){var v=node.value,wto=null,isString,isRegExp;if ((isString=('string'===(typeof v))))(wto=sA); else if ((isRegExp=(v instanceof RegExp)))(wto=rxA);if (wto)wto.push({begin:node.start,str:node.raw,acornNode:node});if ((isString||isRegExp)){(nakedCodeNoStrNoRx=((((nakedCodeNoStrNoRx.substring(0,node.start))+(str_repli(' ',((node.end)-(node.start))))))+(nakedCodeNoStrNoRx.substring(node.end))));}}function meet_MemberExpression(node){var p=node.property;if (((!node.computed)&&(((p.type)==="Identifier")))){var dotI=nakedCode.lastIndexOf('.',p.start);if ((dotI<0))throw new Error('meet_MemberExpression bug');dA.push({begin:dotI,str:code.substring(dotI,((p.start)+(p.name.length))),name:p.name,acornNode:p});}}function meet_ObjectExpression(node){node.properties.forEach(function (p){var k=p.key;if (((k.type)==="Identifier"))meet_Identifier(k); else if (((k.type)==="Literal"))meet_Literal(k); else throw new Error(("Whatever "+(node.start)));});}function meet_ThisExpression(node){iA.push({begin:node.start,str:'this',name:'this',acornNode:node});}function meet_VariableDeclaration(node){node.declarations.forEach(function (n){meet_Identifier(n.id);});}var bcA=ret.bracketcurlyArr,brA=ret.bracketroundArr,bsA=ret.bracketsquareArr,beA=ret.bracketextraArr,bA=ret.bracketArr,find_bracket_cfg=[{out_arr:bcA,open:'{',close:'}',typebracket:'curly'},{out_arr:brA,open:'(',close:')',typebracket:'round'},{out_arr:bsA,open:'[',close:']',typebracket:'square'}].concat(extraBracketArr.map(function (x){var ret=Object.create(x);(ret.out_arr=beA);return ret;}));find_bracket(find_bracket_cfg,nakedCodeNoStrNoRx,code,bA);build_bracket_tree(bA,ret.bracketTree);build_bracket_sep_split(bA,nakedCodeNoStrNoRx,code,reservedArr);build_bracket_var_leftstr_rightstr(bA,cA);jMRA.push.apply(jMRA,bA.filter(function (b){return ((b.typebracket)==='metaret');}));var tmp=bA.filter(function (x){return ((x.typebracket)===VAR);}).reduce(function (a,b){return a.concat(b.sepSplit);},[]);for(var iA_i=0,n=tmp.length,niA=iA.length,i=0;(((i<n))&&((iA_i<niA)));i++){var x=tmp[i],id;while ((((id=iA[iA_i]).begin)<(x.begin))){(id.isVardecl=false);iA_i++;}(id.isVardecl=true);iA_i++;}var iA=ret.identifierArr,iR=(ret.identifierArrReverse=reversed(iA)),vdA=(ret.vardeclArr=[]),iO=(ret.identifierObj={});for(var n=iA.length,i=0;(i<n);i++){var x=iA[i];(((iO[x.str])!==(_emptyObj[x.str]))?iO[x.str]:(iO[x.str]=[])).push(x.begin);if (x.isVardecl)vdA.push(x);}var cA=ret.callArr,cO=(ret.callObj={});for(var n=cA.length,i=0;(i<n);i++){var x=cA[i];(((cO[x.name])!==(_emptyObj[x.name]))?cO[x.name]:(cO[x.name]=[])).push(x.begin);}var iOR=(ret.identifierObjReverse={});for (var str in iO){if (!(str in iOR)){(iOR[str]=reversed(iO[str]));}}var all=(ret.all=[]);for (var k in ret){var mo=k.match(/^(.+)Arr$/);if (mo){var arr=ret[k],type=mo[1];for(var i=arr.length;i--;)(arr[i].type=type);all.push.apply(all,arr);}}for(var i=all.length;i--;){var xi=all[i];if (!('end' in xi))(xi.end=((xi.begin)+(xi.str.length)));}all.sort(compare_begin_end);for(var i=all.length;--i;){var xi=all[i],xim1=all[(i-1)];if (((((xi.begin)===(xim1.begin)))&&(((xi.end)===(xim1.end))))){if (((xi.type)!==(xim1.type)))throw new Error("Internal bug.");all.splice(i,1);}}(ret.allReverse=reversed(all));var allTree=[].concat(all);for(var i=((allTree.length)-1);i--;){var xi=allTree[i],xip1;while (((xip1=allTree[(i+1)])),(((xip1&&(((xi.begin)<=(xip1.begin)))))&&(((xip1.end)<=(xi.end))))){((xi.children)||((xi.children=[]))).push(allTree.splice((i+1),1)[0]);}}(ret.allTree=allTree);return ret;}(reservedSet={});function compare_begin(a,b){return (((a.begin)<(b.begin))?-1:+1);}function compare_begin_end(a,b){return (((a.begin)<(b.begin))?-1:(((a.begin)>(b.begin))?+1:(((a.end)>(b.end))?-1:+1)));}function build_bracket_tree(inArr,outTree){var pile=[];for(var n=inArr.length,i=0;(i<n);i++){var x=inArr[i];(x.bracketchildren=[]);var last;while ((((last=pile[((pile.length)-1)]))&&(((last.end)<(x.begin)))))pile.pop();(x.bracketparent=(last?last:null));(x.bracketdepth=pile.length);if ((last&&(((x.begin)<(last.end)))))last.bracketchildren.push(x); else outTree.push(x);pile.push(x);}}function build_bracket_sep_split(bA,nakedCodeNoStrNoRx,code,reservedArr){for(var i=bA.length;i--;){var x=bA[i],kids=x.bracketchildren,nakedOne=nakedCodeNoStrNoRx.substring(x.begin,x.end),offset=x.begin,whiteArr=[{begin:0,end:x.open.length}];for(var nj=kids.length,j=0;(j<nj);j++){var kid=kids[j];whiteArr.push({begin:((kid.begin)-offset),end:((kid.end)-offset)});}whiteArr.push({begin:((nakedOne.length)-(x.close.length)),end:nakedOne.length});(nakedOne=str_whiteSlice(nakedOne,whiteArr));var sA=(x.sepArr=[]);for(var nj=nakedOne.length,j=0;(j<nj);j++){var c=nakedOne.charAt(j);if ((((c===','))||((c===';'))))sA.push({index:(offset+j),type:c});}var FIRST='<first>',LAST='<last>',arr=[{index:(offset+(x.open.length)),type:FIRST}].concat(sA).concat([{index:(((offset+(nakedOne.length)))-(x.close.length)),type:LAST}]),sS=(x.sepSplit=[]);for(var n=((-1)+(arr.length)),j=0;(j<n);j++){var before=arr[j],after=arr[(j+1)],begin=((before.index)+((((((before.type)!==FIRST))&&(((before.type)!==LAST)))?before.type.length:0))),end=after.index,str=code.substring(begin,end);if (((!str)||(/^\s*$/.test(nakedCodeNoStrNoRx.substring(begin,end)))))continue;sS.push({begin:begin,end:end,str:str,sep_begin:before,sep_end:after});}}}function build_bracket_var_leftstr_rightstr(bA,commentArr){for(var i=bA.length,i_cA=commentArr.length;i--;){var brack=bA[i];if (((brack.typebracket)!==VAR))continue;var vdArr=(brack.vdArr=[]);var s_arr=brack.sepSplit;for(var nj=s_arr.length,j=0;(j<nj);j++){var s=s_arr[j],str=(s.hasOwnProperty('str_noComments')?s.str_noComments:(s.str_noComments=str_trim((/\/\*|\*\//.test(s.str)?removeComments(s):s.str)))),mo_LR=str.match(/^([^=]*)\s*=\s*([\s\S]+)$/);vdArr.push((mo_LR?{leftstr:mo_LR[1],rightstr:mo_LR[2]}:{leftstr:str,rightstr:null}));}}function removeComments(s){var str=s.str,begin=s.begin,end=s.end,arr=[];if ((0<i_cA)){for(;i_cA--;){var c=commentArr[i_cA];if (((c.end)>end))continue;if (((c.end)<begin)){i_cA++;break;}arr.unshift(((c.end)-begin));}arr.unshift(((c.begin)-begin));return arr.join('');}return str;}}function find_bracket(cfgA,nakedCodeNoStrNoRx,code,bA){var rx=new RegExp(cfgA.map(function (o){var open=fix(o.open),close=fix(o.close);return ((((((((((('('+open))+')'))+'|'))+'('))+close))+')');function fix(x){return (('string'===(typeof x))?x.replace(/(\W)/g,'\\$1').replace(/^(\w)/,'\\b$1').replace(/(\w)$/,'$1\\b'):x.map(fix).join('|'));}}).join('|'),'g'),arr=[],mo,error;while ((mo=rx.exec(nakedCodeNoStrNoRx))){var ind2=-1;for(var i=mo.length;i--;){if (mo[i]){(ind2=(i-1));break;}}if (!((-1)<ind2))error.bug;var is_close=(1&ind2),cfgA_ind=(ind2>>1);var sanity=cfgA[cfgA_ind][(is_close?'close':'open')];if (!(('string'===(typeof sanity))?((mo[0])===sanity):((-1)<(sanity.indexOf(mo[0])))))error.bug;var one={begin:mo.index,end:((mo.index)+(mo[0].length)),cfg:cfgA[cfgA_ind]};(one[(is_close?'close':'open')]=mo[0]);arr.push(one);}var pile=[];for(var n=arr.length,i=0;(i<n);i++){var one=arr[i];if (one.open){var x={begin:one.begin,typebracket:one.cfg.typebracket,open:one.cfg.open,close:one.cfg.close};one.cfg.out_arr.push(x);bA.push(x);pile.push({i:i,x:x});} else {var last=pile[((pile.length)-1)];if (!last){if (!one.cfg.ignore_unbalanced)throw new Error(((('Unbalanced brackets: missing an opening "'+(one.cfg.open)))+'".'));} else if ((('string'===(typeof last.x.close))?((last.x.close)!==(one.close)):(0>(last.x.close.indexOf(one.close))))){if (!((arr[last.i].cfg.ignore_unbalanced)||(one.cfg.ignore_unbalanced))){throw new Error(((((((((((((((((('Unbalanced brackets: opening typebracket "'+(last.x.typebracket)))+'" ('))+(last.x.begin)))+')'))+' does not match closing typebracket "'))+(one.cfg.typebracket)))+'" ('))+(one.begin)))+').'));}} else {var x=pile.pop().x;(x.close=one.close);(x.end=one.end);(x.str=code.substring(x.begin,x.end));}}}if (((pile.length)!==0)){var last=pile[((pile.length)-1)];((global.console)&&(global.console.error("last:",last)));throw new Error(((((((((((('Unbalanced brackets: missing a closing "'+(last.x.close)))+'" for {open:"'))+(last.x.open)))+'", begin:<char:'))+(last.x.begin)))+'>}. Did you forget a semicolon, maybe?'));}}function reversed(arr){var ret=[].concat(arr);ret.reverse();return ret;}function str_repli(s,n){var key;if ((n<1000)){(key=(((s+'#'))+n));if ((key in str_repli))return str_repli[key];}var tmpArr=[];while (n){if ((n&1))tmpArr.push(s);(s+=s);(n>>=1);}var ret=tmpArr.join('');if ((key!=null))(str_repli[key]=ret);return ret;}function str_trim(s){var n=s.length;if (!n)return s;for(var i=0;(i<n);i++){if (((s.charAt(i))!==' '))break;}for(var j=(n-1);(j>=i);j--){if (((s.charAt(j))!==' '))break;}return s.substring(i,(j+1));}function str_filler(f,n){if (((typeof f)==='number')){(n=f);(f=null);}(f=(f||' '));var target=((Math.abs(n))*(f.length));return function (s){(s=(s||''));(s=(s+''));var remaining=Math.max(0,(target-(s.length))),tmp=f,fill=[];for(var p=((Math.floor((remaining/(f.length))))+(((((remaining%(f.length)))>0)?1:0)));(p>0);((tmp+=tmp)),((p>>=1))){if ((p&&1))fill.push(tmp);}(fill=fill.join(''));if (((fill.length)>remaining))(fill=((n<0)?fill.substring(((fill.length)-remaining)):fill.substring(0,remaining)));if (((fill.length)!==remaining))throw new Error('str.filler() is buggy!');return ((n<0)?(fill+s):(s+fill));};}function str_whiteSlice(str,whiteArr){if (!whiteArr.length)return str;var whiteLast=whiteArr[((whiteArr.length)-1)],retArr=[],current=0;for(var n=whiteArr.length,i=0;(i<n);i++){var white=whiteArr[i],w_end=white.end,w_begin=white.begin;if ((current<w_begin))retArr.push(str.substring(current,w_begin));retArr.push(str_repli(' ',(w_end-w_begin)));(current=w_end);}if ((current<(str.length)))retArr.push(str.substring(current));return retArr.join('');}})(this);}if (((typeof cp2fmtree)==='undefined')){(function (global){var METAFUN='jsmMetafun',METARET='jsmMetaret',FUNCTION_EXPRESSION='functionExpression',FUNCTION_DECLARATION='functionDeclaration',RESERVED='reserved',CALL='call',DOTCALL='dotcall',TYPE_BRACKET='bracket',TYPEBRACKET_CURLY='curly',_emptyObj={};(global.cp2fmtree=cp2fmtree);function cp2fmtree(cp,namespace,workspace,parent){var isTopLevel=((arguments.length)<2);(namespace||((namespace=[])));(workspace||((workspace={iAnonymous:0,lastname2fmarr:{}})));var at=((cp instanceof Array)?cp:cp.allTree),ret=[];if (isTopLevel)(ret.lastname2fmarr=workspace.lastname2fmarr);for(var n=at.length,i=0;(i<n);i++){var one=at[i];var isFunction=((((one.type)===FUNCTION_EXPRESSION))||(((one.type)===FUNCTION_DECLARATION))),isMetafunction=((one.type)===METAFUN),isAnonymousFunction=(isFunction&&(!one.name));if ((((isAnonymousFunction||isFunction))||isMetafunction)){var begin=one.begin,end,dot_arr=[],dotnode_arr=[],next;if (isAnonymousFunction){(dot_arr=[('anonymous#'+(workspace.iAnonymous++))]);} else {(dot_arr=one.name.split('.'));}var ocnc=one.children.filter(function (c){return ((c.type)!=='comment');}),c0=ocnc[0];if (((c0.type)==='call')){if (((c0.name)!==(one.name)))throw new Error('Inconsistency! Probably a bug here.');ocnc.shift();}if (((ocnc.length)!==2))throw new Error('Unexpected metafun declaration or function declaration');var param_node=ocnc[0],param_arr=param_node.sepSplit.map(strip_comment_and_space),param_set={};for(var pi=param_arr.length;pi--;)(param_set[param_arr[pi]]=1);var body_node=ocnc[1],end=body_node.end,body=body_node.str,fullname_arr=namespace.concat(dot_arr),fullname=fullname_arr.join('.'),lastname=fullname_arr[((fullname_arr.length)-1)],out={begin:begin,end:end,fullname_arr:fullname_arr,lastname:lastname,isFunction:isFunction,isMetafunction:isMetafunction,isAnonymousFunction:isAnonymousFunction,dot_arr:dot_arr,dotnode_arr:dotnode_arr,param_node:param_node,body_node:body_node,fm_node:one,fullname:fullname,param_arr:param_arr,param_str:param_arr.join(','),param_set:param_set,parent:(parent||null),children:null,body:null};var children=(body_node.children?cp2fmtree(body_node.children,fullname_arr,workspace,out):[]);for(var j=children.length;j--;){var kid=children[j],a=((kid.begin)-(body_node.begin)),b=((kid.end)-(body_node.begin));if (!kid.isAnonymousFunction)(body=((((body.substring(0,a))+(body.substring(a,b).replace(/[\s\S]/g,' '))))+(body.substring(b))));}(out.children=children);(out.body=body);ret.push(out);if (!isAnonymousFunction){((workspace.lastname2fmarr[lastname])||((workspace.lastname2fmarr[lastname]=[]))).push(out);}} else if (one.children){ret.push.apply(ret,cp2fmtree(one.children,namespace,workspace));}}if (isTopLevel){find_out_who_has_what(ret,[].concat(cp.vardeclArr),'vardecl');find_out_who_has_what(ret,cp.identifierArr.filter(function (x){return !x.isVardecl;}),'varuse');find_decluse(ret);}return ret;}function strip_comment_and_space(o){return o.str.replace(/\/\*[\s\S]*?\*\//g,'').replace(/(^\s+|\s+$)/g,'');}function find_out_who_has_what(arr,vArr,outputName){var n=arr.length;for(var i=0;(i<n);i++){var one=arr[i],c=one.children;if ((c&&(c.length)))find_out_who_has_what(c,vArr,outputName);}for(var i=0;(i<n);i++){var one=arr[i],begin=one.begin,end=one.end,param_begin=one.param_node.begin,param_end=one.param_node.end,one_vda=(one[(outputName+'Arr')]=[]),one_vdo=(one[(outputName+'Obj')]={});for(var j=vArr.length;j--;){var vd=vArr[j];if (((vd.end)<param_end))break;if (((vd.begin)<end)){var x=vArr.splice(j,1)[0];one_vda.unshift(x);((one_vdo[x.name])||((one_vdo[x.name]=[]))).push(x);}}}}function find_decluse(arr_or_fm,idname2decluse){if ((arr_or_fm instanceof Array)){for(var n=arr_or_fm.length,i=0;(i<n);i++)find_decluse(arr_or_fm[i],idname2decluse);return;}var fm=arr_or_fm;(idname2decluse=(idname2decluse?copy(idname2decluse):{}));var fm_idname2decluse=(fm.idname2decluse=idname2decluse),arr_push_out=[idname2decluse];for(var j=fm.param_arr.length;j--;){var name=fm.param_arr[j],fpnssi=fm.param_node.sepSplit[j];arr_push(arr_push_out,name,{isParam:true,fmDecl:fm,use:[],name:name,declArr:[{begin:fpnssi.begin,end:fpnssi.end}]});}for (var name in fm.vardeclObj){if (!(name in _emptyObj)){var tmp_arr=fm.vardeclObj[name],tmp_n=tmp_arr.length,declArr=new Array(tmp_n);for(var tmp_i=0;(tmp_i<tmp_n);tmp_i++){var o=tmp_arr[tmp_i];(declArr[tmp_i]={begin:o.begin,end:o.end});}arr_push(arr_push_out,name,{isVardecl:true,fmDecl:fm,use:[],name:name,declArr:declArr});}}for(var j=fm.children.length;j--;){var kid=fm.children[j],name=kid.lastname,kid_declArr=[];if (kid.dotnode_arr.length){kid_declArr.push({begin:kid.dotnode_arr[0].begin,end:kid.dotnode_arr.slice(-1)[0].end});}arr_push(arr_push_out,name,{isFunction:true,fmDecl:fm,use:[],name:name,declArr:kid_declArr});}for(var n=fm.varuseArr.length,j=0;(j<n);j++){var one=fm.varuseArr[j],name=one.name;if (!idname2decluse[name]){arr_push(arr_push_out,name,{isGlobal:true,fmDecl:null,use:[]});}arr_push_use(arr_push_out,fm,one);}find_decluse(fm.children,idname2decluse);}function copy_fm_use(one_vu,fmUse){return (one_vu||([])).map(function (use){var o=copy(use);(o.fmUse=fmUse);return o;});}function arr_push(arr_push_out,name,o){var undef;(name||0).substring.call.a;(o||undef).hasOwnProperty.call.a;if ((arr_push_out instanceof Array)){arr_push_out.forEach(function (out){arr_push(out,name,o);});return;}if (((!arr_push_out[name])||(((arr_push_out[name].fmDecl)!==(o.fmDecl))))){var o2=copy(o);(o2.use=[].concat(o2.use));(arr_push_out[name]=o2);} else {var use=arr_push_out[name].use;use.push.apply(use,o.use);}}function arr_push_use(arr_push_out,fmUse,use){if ((arr_push_out instanceof Array)){arr_push_out.forEach(function (out){arr_push_use(out,fmUse,use);});return;}arr_push_out[use.name].use.push(mix(copy(use),{fmUse:fmUse}));}function copy(o){return mix({},o);}function mix(o,o2){for (var k in o2){if (!(k in _emptyObj)){(o[k]=o2[k]);}}return o;}})(this);}if (((typeof metaparse)==='undefined')){if (((typeof codeparse)==='undefined')){}if (((typeof cp2fmtree)==='undefined')){};(function (global){var ACTION_PARAM=0,METAFUN='metafun',METARET='metaret',EXTRA_RESERVED_ARR=[METAFUN,METARET],EXTRA_BRACKET_ARR=[{open:METARET,close:';',typebracket:METARET,ignore_unbalanced:true}],CODEPARSE_OPT={extraReservedArr:EXTRA_RESERVED_ARR,extraBracketArr:EXTRA_BRACKET_ARR},ALLOW_RET_OPT={jsmAllowMetaretOutsideFunction:true,allowReturnOutsideFunction:true},CODEPARSE_ALLOW_RET_OPT=mixOwn({},CODEPARSE_OPT,ALLOW_RET_OPT);(global.MetaDecl=MetaDecl);(global.MetaFunction=MetaFunction);(global.metaparse=metaparse);(metaparse.get_CODEPARSE_OPT=metaparse_get_CODEPARSE_OPT);(metaparse.get_CONST=metaparse_get_CONST);function metaparse_get_CODEPARSE_OPT(){return JSON.parse(JSON.stringify(CODEPARSE_OPT));}function metaparse_get_CONST(){return {'METAFUN':METAFUN,'METARET':METARET,'CODEPARSE_OPT':metaparse_get_CODEPARSE_OPT()};}var _metaparse_rx=/\s*(metafun|function)\s*(\S+)\s*\(\s*([^\)]+?)\s*\)((?![\r\n]\s*(metafun|function))[\s\S])*/g,_metaparse_one_rx=/^\s*(metafun|function)\s*(\S+)\s*\(\s*([^\)]+?)\s*\)\s*\{\s*(((?![\r\n]\s*(metafun|function))[\s\S])*)\s*\}\s*$/,_metaparse_one_start_rx=/^\s*(metafun|function)\s/,_metaparse_one_start_function_rx=/^\s*function\s/;function metaparse(code,name2info,opt){(name2info||((name2info=_global_name2info)));var noli=(code?[code]:document.getElementsByTagName('script')),ret=[];for(var n=noli.length,i=0;(i<n);i++){var s=noli[i],sString=('string'===(typeof s));if (((!sString)&&(('text/js-metaret-decl'!==(s.getAttribute('type'))))))continue;var metacode=(sString?s:((s.textContent)||(s.innerText))),cp=codeparse(metacode,CODEPARSE_OPT),fmtree=cp2fmtree(cp);rec_decl(fmtree,true,name2info,ret,opt);}return ret;}function rec_decl(fmtree,isTop,name2info,output,opt){(output||((output=[])));if ((fmtree instanceof Array)){for(var n=fmtree.length,i=0;(i<n);i++)rec_decl(fmtree[i],isTop,name2info,output,opt);} else {if (fmtree.children)rec_decl(fmtree.children,false,name2info,output,opt);(name2info[fmtree.fullname]={fm:fmtree,_work_in_progress:true});Decl(fmtree.fullname,fmtree.param_str,fmtree.body,fmtree.children,fmtree.isFunction,name2info,opt);delete name2info[fmtree.fullname]._work_in_progress;if (isTop)output.push({fullname:fmtree.fullname,fmtree:fmtree,info:name2info[fmtree.fullname]});}return output;}var _global_name2info={};function MetaDecl(code_or_name,param,body,children,name2info,opt){Decl(code_or_name,param,body,children,false,(name2info||_global_name2info),opt);}function FunDecl(code_or_name,param,body,children,name2info,opt){Decl(code_or_name,param,body,children,true,(name2info||_global_name2info),opt);}function Decl(code_or_name,param,body,children,is_fun,name2info,opt){(children||((children=[])));(((is_fun!=null))||((is_fun=_metaparse_one_start_function_rx.test(code_or_name))));(name2info||((name2info=_global_name2info)));var param_null=(param==null),body_null=(body==null);if ((param_null^body_null))throw new Error('Decl: invalid usage. Give either both `param` and `body`, or none of them.');if (param_null){var code=(_metaparse_one_start_rx.test(code_or_name)?code_or_name:(((((is_fun?'function':'metafun'))+' '))+code_or_name)),mo=_metaparse_one_rx.exec(code),name=mo[2];(param=mo[3]);(body=mo[4]);Decl(name,param,body,children,is_fun,name2info,opt);return;}if (!is_fun){var body_cp=codeparse(body,ALLOW_RET_OPT),body_argumentsArr=((body_cp.identifierObj['arguments'])||([]));if (body_argumentsArr.length)throw new Error('metafun error: it is forbidden to use `arguments` in the body of the metafun (because the body of the metafun may end up being inlined within a `while` loop).');}var name=code_or_name;var dot_arr=name.split('.'),g=((name2info===_global_name2info)?global:{});while (((dot_arr.length)>1)){var next=dot_arr.shift();(g=((g[next])||((g[next]={}))));}var remember=(is_fun?'':((((((((('\nmetafun '+name))+'\n( '))+param))+')').replace(/([\r\n])/g,'$1// --- '))+'\n\n'));(g[dot_arr[0]]=(is_fun?NormalFunction:MetaFunction)(name,param,(remember+body),name2info,children,opt));}function NormalFunction(name,param,body,name2info,children,opt){_checkNameNotUsedYet(name2info,name);if ((children&&(children.length))){var rx=/\}\s*/,ok=rx.test(body);(body=(ok&&(body.replace(rx,((('\n\n'+(childrenCode(name2info,children))))+'\n\n}')))));}var info=(name2info[name]=((name2info[name])||({})));(info.name=name);(info.lastname=name.replace(/^.*\./,''));(info.origParam=param);(info.origBody=body);(info.name2info=name2info);(info.impl=null);(info.paramArr=param.split(','));(info.body=body);var ret=((opt&&(opt.doNotCompile))?fWrapper:getImpl());(ret.getInfo=getInfo);(ret.getImpl=getImpl);return ret;function fWrapper(){return ((info.impl)||((info.impl=getImpl()))).apply(this,arguments);}function getInfo(){return Object.create(info);}function getImpl(){return ((info.impl)||((info.impl=new Function(param,body))));}}function MetaFunction(name,param,body,name2info,children,opt){_checkNameNotUsedYet(name2info,name);var info=(name2info[name]=((name2info[name])||({})));(info.name=name);(info.lastname=name.replace(/^.*\./,''));(info.origParam=param);(info.origBody=body);(info.name2info=name2info);(info.solved=false);(info.newParam=null);(info.newBody=null);(info.impl=null);var paramArr=(info.paramArr=_checkExtractParam(param)),varArr=(info.varArr=_extractVar(body)),metaretArr=(info.metaretArr=_checkExtractMetaret(body,paramArr.self,name));_createSolver(info,children);var ret=mfWrapper;if (metaretArr.hasAll(name2info)){info.solve();if (!(opt&&(opt.doNotCompile)))(ret=info.compile());}(ret.getInfo=mf_getInfo);(ret.getImpl=mf_getImpl);return ret;function mfWrapper(){if (!info.impl)info.compile();return info.impl.apply(this,arguments);}function mf_getInfo(){return Object.create(info);}function mf_getImpl(){if (!info.impl)info.compile();return info.impl;}}var _RX_NAME=/^(([a-zA-Z_]\w*|anonymous#\d+)\.)*([a-zA-Z_]\w*|anonymous#\d+)$/,_RX_NAME_ANONYMOUS=/^(([a-zA-Z_]\w*|anonymous#\d+)\.)*(anonymous#\d+)$/,_RX_PARAM=/^((?:^\s*|\s*,\s*)[a-zA-Z_]\w*(?:\s*))+$/,_RX_ACTION=/^[a-zA-Z_]\w*?(\.[a-zA-Z_]\w*?)*$/,_Aps=Array.prototype.slice;function _createSolver(info,children){var name=info.name,metaretArr=info.metaretArr,paramArr=info.paramArr,varArr=info.varArr,origBody=info.origBody,name2info=info.name2info,namespace_arr=name.split('.');(info.solve=solve);(info.compile=compile);function solve(){if (info.solved)return;if (!metaretArr.hasAll(name2info))throw new Error(((('MetaFunction : _createSolver : solve() could not resolve all dependencies yet for metafunction "'+name))+'".'));if (!metaretArr.length)solveNoMetaret(); else if (!metaretArr.hasOther())solveSelf(); else solveMulti();(info.solved=true);}function compile(){if (!info.solved)solve();return ((info.impl)||((info.impl=new Function(info.newParam.join(','),info.newBody))));}function solveNoMetaret(){var warn_msg=((('MetaFunction : _createSolver:solveNoMetaret() no #metaret in body of metafunction "'+name))+'".');if (((('undefined'!==(typeof console)))&&(console.warn)))console.warn(warn_msg);(info.newParam=paramArr);(info.newBody=origBody.replace(/^\s+$/mg,''));}function solveSelf(){var against=[paramArr,origBody],label=_generateAddName(('L_'+name),against),undefName=_generateAddName('undef',against),newParam=(info.newParam=paramArr),i4=_indentGen(4),i8=_indentGen(8),newBody=(info.newBody=i4(((((((((((((((('var '+undefName))+';\n'))+label))+': while (true) {\n'))+(i4(((_reinitUndef(_replaceMetaretWithContinue(name2info,metaretArr,origBody,label,paramArr),info.varArr,undefName))+'\n')))))+'  return;\n'))+'}\n'))+(((children&&(children.length))?((('\n\n'+(childrenCode(name2info,children))))+'\n'):'')))).replace(/^\s+$/mg,''));(info.paramArr=newParam);(info.body=newBody);}function solveMulti(){var maha=metaretArr.hasAll(),infoArr=[info].concat(maha.infoArr.filter(function (other){return (other!==info);})),nameArr=infoArr.map(function (info){return info.name;}),against=infoArr.map(function (info){return info.paramArr.concat(info.origBody);}),switch_ind_name=(nameArr.switch_ind_name=_generateAddName('switch_ind',against)),switchLabel=(nameArr.switchLabel=_generateAddName('L_switch',against)),undefName=_generateAddName('undef',against);check_bound_variables_all_shared(infoArr.map(function (info){return info.fm;}));var i4=_indentGen(4),i8=_indentGen(8),i12=_indentGen(12),newParam=(info.newParam=paramArr),newBody=(info.newBody=i4([((('var '+undefName))+';'),((('var '+switch_ind_name))+' = 0;'),(switchLabel+': while (true) {'),i4(((('switch ('+switch_ind_name))+') {'))].concat(infoArr.map(info2code)).concat([i4('}'),i4('return;'),'}',''].concat(((children&&(children.length))?['','',childrenCode(name2info,children.filter(function (kid){((kid.fullname)||0).substring.call.a;return (0>(nameArr.lastIndexOf(kid.fullname)));}))]:[])))).join('\n').replace(/^\s+$/mg,''));function info2code(info,ind){var code=['',((('case '+ind))+':')];code.push(i4(_reinitUndef(_replaceMetaretWithContinue(name2info,info.metaretArr,info.origBody,nameArr,against),info.varArr,undefName)));code.push('break;');code.push('');return code.map(i8).join('\n');}}}function childrenCode(name2info,children){var arr=[];for(var n=children.length,i=0;(i<n);i++){var kid=children[i],info=name2info[kid.fullname];if (kid.isAnonymousFunction)continue;arr.push('\n');arr.push(((((((((('function '+(info.lastname)))+'('))+(info.paramArr.join(','))))+')\n'))+((/^\s*\{[\s\S]*?\}\s*$/.test(info.body)?info.body:((('{\n'+(info.body)))+'\n}\n')))));}return arr.join('\n');}function _checkNameNotUsedYet(name2info,name){if (!_RX_NAME.test(name))throw new Error(((('MetaFunction : _checkNameNotUsedYet : Invalid function name "'+name))+'". The function name must match [a-zA-Z_][a-zA-Z_0-9]*'));if (name2info_has(name2info,name,[]))throw new Error(((((('MetaFunction : _checkNameNotUsedYet : Duplicate function name "'+name))+'". The function name must be unique: '))+'MetaFunction can be called one time only with a given name.'));}function _checkExtractParam(param){(param=param.replace(/\/\*.*?\*\//g,''));if (!_RX_PARAM.test(param))throw new Error('MetaFunction : _checkExtractParam : Invalid parameters string, the string must be like "self,x,y,z".');var ret=param.replace(/\s+/g,'').split(',');(ret.self=ret.splice(ACTION_PARAM,1)[0]);return ret;}function _extractVar(body){var cp=codeparse(body,CODEPARSE_ALLOW_RET_OPT),iA=cp.identifierArr,ret=[];for(var n=iA.length,i=0;(i<n);i++){var x=iA[i];ret.push({text:x.str,end:((x.begin)+(x.str.length)),start:x.begin,isVardecl:x.isVardecl});}return ret;}function _checkExtractMetaret(body,self,selfName){var cp=codeparse(body,CODEPARSE_ALLOW_RET_OPT),beA=cp.bracketextraArr,ret=[];(ret.body=body);(ret.self=self);(ret.selfName=selfName);for(var beA_n=beA.length,beA_i=0;(beA_i<beA_n);beA_i++){var x=beA[beA_i];if (((x.typebracket)!==METARET))continue;var exprArr=x.sepSplit.map(function (o){return o.str.replace(/^\s+/,'').replace(/\s+$/,'');}),action=((((exprArr.length)>ACTION_PARAM))&&(exprArr.splice(ACTION_PARAM,1)[0]));if (!action)throw new Error('MetaFunction : _checkExtractMetaret() : A `metaret` needs at least an action.');if ((((action!==self))&&(!_RX_ACTION.test(action)))){throw new Error(((((((('MetaFunction : _checkExtractMetaret : Invalid action "'+action))+'". action must be self ("'))+self))+'") or a named action (like "myOtherAction" or "my.other.action" or "my_other_action").'));}var isSelf=(((action===self))||((action===selfName)));ret.push({exprArr:exprArr,isSelf:isSelf,action:(isSelf?selfName:action),end:x.end,start:x.begin,namespace:selfName,namespace_arr:selfName.split('.')});}(ret.hasOther=hasOther);(ret.hasAll=hasAll);return ret;}function hasOther(){var cache='hasOtherResult';if ((cache in (this)))return this[cache];var arr=[];for(var i=this.length;i--;){if (!this[i].isSelf)arr.push(this[i].action);}return (this[cache]=((arr.length)&&arr));}function hasAll(name2info,visited,visitedObj,visitedArr){var topLevel=((arguments.length)<2);if (topLevel){var cache='hasAllResult';if ((cache in (this)))return this[cache];(visitedObj={});(visitedArr=[]);}for(var i=this.length;i--;){var x=this[i];if (x.isSelf)continue;var action=x.action;if (!action)throw new Error('MetaFunction : hasAll : Found a bug: empty metaret action (not permitted).');if ((action in visitedObj))continue;var info=name2info_get(name2info,action,x.namespace_arr);if (!info)return false;if (((info.name) in visitedObj))continue;(visitedObj[action]=(visitedObj[info.name]=info));visitedArr.push(info);if (!info.metaretArr.hasAll(name2info,visited,visitedObj,visitedArr))return false;}if (topLevel)return (this[cache]={vObj:visitedObj,infoArr:visitedArr}); else return true;}function _dropAction(paramArr){return paramArr.slice(0,ACTION_PARAM).concat(paramArr.slice((ACTION_PARAM+1)));}function _generateAddName(baseName,against){var newName=_generateName(baseName,against);against.push(newName);return newName;}function _generateName(baseName){var against=_Aps.call(arguments,1);for(var i=null;true;(i=(((i>>>0))+1))){var label=((((('_'+(baseName.replace(/#/g,'').replace(/\W/g,'_'))))+((i||''))))+'_');if (!match(against))return label;}function match(against){if (((typeof against)==='string'))return ((-1)<(against.indexOf(label)));for(var i=against.length;i--;){if (match(against[i]))return true;}return false;}}function _replaceMetaretWithContinue(name2info,metaretArr,origBody,label_or_nameArr){var against=_Aps.call(arguments,1),isLabel=((typeof label_or_nameArr)==='string'),ret=origBody;for(var i=metaretArr.length;i--;){var oneMetaret=metaretArr[i],before=ret.slice(0,oneMetaret.start),after=ret.slice(oneMetaret.end);var after_comment='',after_comment_mo=after.match(/^\s*(?:\/\/[^\r\n]*[\r\n]+|\/\*((?!\*\/)[\s\S]*)\*\/)/);if (after_comment_mo){(after_comment=after_comment_mo[0]);(after=after.substring(after_comment.length));}var code=prepareCode(oneMetaret,after_comment);(ret=(((before+code))+after));}return ret;function prepareCode(oneMetaret,after_comment){var code=[],info=name2info_get(name2info,oneMetaret.action,oneMetaret.namespace_arr),paramArr=info.paramArr,exprArr=oneMetaret.exprArr;if (((paramArr.length)!==(exprArr.length))){throw new Error(((((((((((('MetaFunction : _replaceMetaretWithContinue : prepareCode : Invalid number of metaret arguments, action  "'+(oneMetaret.action)))+'" expects '))+(paramArr.length)))+' arguments, but '))+(exprArr.length)))+' were given.'));}if (((paramArr.length)===1)){code.push(((((((paramArr[0])+' = '))+(exprArr[0])))+';'));} else {for(var j=0,i=0,end=paramArr.length;(i<end);i++){var varname=paramArr[i];if ((varname===(exprArr[i])))continue;var newVarname=_generateName(varname,against);against.push(newVarname);code.splice(j++,0,((((((('var '+newVarname))+' = '))+(exprArr[i])))+';'));code.push((((((varname+' = '))+newVarname))+';'));}}if (isLabel){code.push(((('continue '+label_or_nameArr))+';'));} else {var nameArr=label_or_nameArr;if (((oneMetaret.action)===(metaretArr.selfName))){code.push(((((('continue '+(nameArr.switchLabel)))+'; // --- stay in: '))+(oneMetaret.action)));} else {var switch_ind=nameArr.indexOf(info.name);if ((0>switch_ind)){throw new Error(((('MetaFunction : _replaceMetaretWithContinue : prepareCode : Found a bug! Could not find the switch index of action "'+(oneMetaret.action)))+'"'));}code.push(((((((((nameArr.switch_ind_name)+' = '))+switch_ind))+'; // --- go to: '))+(oneMetaret.action)));code.push(((('continue '+(nameArr.switchLabel)))+';'));}}if (after_comment)code.unshift(after_comment);code.unshift('{');code.push('}');return ((code.join('\n'))+'\n');}}function _reinitUndef(body,varArr,undefName){var toReinit=[],textSeen={};for(var i=0,i_end=varArr.length;(i<i_end);i++){var v=varArr[i],text=v.text;if ((text in textSeen))continue;(textSeen[text]=1);var maybeDeclInd=body.search(new RegExp((text+'\\s*[,;]')));if (((((v.isVardecl)&&(((-1)<maybeDeclInd))))&&((maybeDeclInd<(v.end))))){toReinit.push(text);}}if (!toReinit.length)return body;return ((((((('var '+(toReinit.map(function (s){return (((s+' = '))+undefName);}).join('\n, '))))+((((toReinit.length)>1)?'\n':''))))+';\n'))+body);}function _indentGen(n){var x=' ',s=[];while (n){if ((n&1))s.push(x);(n>>=1);(x+=x);}var s_indent=s.join('');return indentFun;function indentFun(s_or_a){if (((typeof s_or_a)==='string')){var rxEol=/\n/;if (rxEol.test(s_or_a))return s_or_a.split(rxEol).map(indentFun).join('\n');return (s_indent+s_or_a);}return s_or_a.map(indentFun);}}function name2info_has(name2info,name,namespace_arr){var info=name2info_get(name2info,name,namespace_arr);return !!(info&&(!info._work_in_progress));}function name2info_get(name2info,name,namespace_arr){var fullname=namespace_arr.concat(name).join('.');if ((fullname in name2info))return name2info[fullname];if (namespace_arr.length)return name2info_get(name2info,name,namespace_arr.slice(0,-1));return false;}function check_bound_variables_all_shared(fmArr){var name2scope={};fmArr.forEach(check_one);function check_one(fm){if (!fm)return;var m_vuo=fm.varuseObj,m_vdo=fm.vardeclObj,m_pset=fm.param_set;for (var name in m_vuo){if (((!(name in m_vdo))&&(!(name in m_pset)))){var scope=decl_scope(name,fm);if (!name2scope[name])(name2scope[name]={scope:scope}); else if ((scope!==(name2scope[name].scope)))throw new Error('metafun error: when using mutual recursion, the various metafunctions must share their bound variables (if any).');}}}}function decl_scope(name,fm){return (fm?(fm.vardeclObj[name]?fm:decl_scope(name,fm.parent)):null);}function mixOwn(){var ret=arguments[0];for(var i=1,n=arguments.length;(i<n);i++){var one=arguments[i];for (var k in one){if (one.hasOwnProperty(k)){(ret[k]=one[k]);}}}return ret;}})(this);}(function (global){(global.jsm2js=jsm2js);function jsm2js(jsm_code){var local_name2info={},arr=metaparse(jsm_code,local_name2info,{doNotCompile:true}),ret_js=jsm_code;replace_rec(arr);check_leftover(ret_js);return ret_js;function replace_rec(arr){for(var i=arr.length;i--;){var one=arr[i],fmtree=one.fmtree,info=one.info,begin=fmtree.begin,end=fmtree.end,lastname=info.lastname;begin.toPrecision.call.a;(end||null).toPrecision.call.a;if (fmtree.isMetafunction){(ret_js=((((((((((((((((ret_js.substring(0,begin))+'\nfunction '))+(info.lastname)))+'('))+(info.paramArr.join(','))))+')\n{\n'))+(((info.newBody)||(info.solve(),info.newBody)))))+'\n}\n'))+(ret_js.substring(end))));} else if (fmtree.isFunction){var children=fmtree.children;if (children)replace_rec(children.map(function (kid){return {fmtree:kid,info:local_name2info[kid.fullname]};}));}}}}var CONST;function check_leftover(jscode){(CONST||((CONST=metaparse.get_CONST())));var cp=codeparse(jscode,CONST.CODEPARSE_OPT),fm=cp2fmtree(cp),mretArr=((cp.jsmMetaretArr)||([])),mfunArr=((cp.jsmMetafunArr)||([]));if (((mfunArr.length)||(mretArr.length))){if (('undefined'!==(typeof console))){console.error('mfunArr:',mfunArr);console.error('mretArr:',mretArr);}throw new Error(((('jsm2js:check_leftover: found remaining `metafun` and/or `metaret` within function(s): '+' - Please check for basic errors. For example a `metaret` can only be used from within a `metafun`.'))+' See also github issue #9: https://github.com/glathoud/js.metaret/issues/9'));}function enrich(begin){var containing_function;for(var n=fm.length,i=0;(i<n);i++){var one_fm=fm[i];if (((((one_fm.begin)<=begin))&&((begin<(one_fm.end))))){(containing_function=one_fm);break;}}return {begin:begin,containing_function:containing_function,containing_function_fullname:(containing_function&&(containing_function.fullname)),local_context:jscode.substring(Math.max(0,(begin-50)),(begin+40))};}}})(this);}{if (((typeof codeparse)==='undefined')){}if (((typeof cp2fmtree)==='undefined')){}(function (global){var INLINE='inline',CODEPARSE_OPT={extraReservedArr:[INLINE]},CODEPARSE_OPT_BODY={extraReservedArr:[INLINE],jsmAllowMetaretOutsideFunction:true,allowReturnOutsideFunction:true},VARASSIGN='varassign',ASSIGN='assign',CALL='call',BRACKET='bracket',ROUND='round',IDENTIFIER='identifier',RESERVED='reserved',RETURN='return',VAR='var',VARDECL='vardecl';(global.inlineCode=inlineCode);function inlineCode(code,workspace,opt_code_info,error_inline_stack){(workspace||((workspace={})));(error_inline_stack||((error_inline_stack=[])));var cp=codeparse(code,CODEPARSE_OPT),fm=cp2fmtree(cp),all=cp.all,inlineArr=all.map(function (o,ind){var ret=getInlineInfo(o,ind,all,code);if (ret){(ret.begin=ret.o.begin);(ret.end=ret.args.end);(ret.str=code.substring(ret.begin,ret.end));}return ret;}).filter(function (info){return info;});var lastname2fmarr=fm.lastname2fmarr;var key=(opt_code_info?JSON.stringify(opt_code_info):code);error_inline_stack.push({key:key,code:code,workspace:workspace,opt_code_info:opt_code_info});if ((key in workspace)){var newcode=workspace[key].newcode;if (('string'!==(typeof newcode))){if (((((('undefined'!==(typeof console)))&&console))&&(console.error))){console.error(('error_inline_stack (summary):\n '+(error_inline_stack.map(function (x){return ((('\n'+(x.key.substring(0,96))))+((((x.key.length)<96)?'':'...')));}).join('\n\n###\n'))));console.error('error_inline_stack (full):');console.error(error_inline_stack);}throw new Error('inline error: Most likely you have an infinite `inline` recursion. Consider using `metafun` and `metaret` instead.');}return newcode;}(workspace[key]={code_info:opt_code_info,inlineArr:inlineArr,lastname2fmarr:lastname2fmarr,cp:cp,fm:fm});if (!inlineArr.length)return (workspace[key].newcode=code);for(var i=inlineArr.length;i--;){var one=inlineArr[i];(one.fmScopePath=getFmScopePath(fm,one));var local_fmCallMatch=getFmCallMatch(fm,one,one.fmScopePath);if (local_fmCallMatch){(one.hasLocalMatch=true);(one.fmCallMatch=local_fmCallMatch);(one.matchKey=key);} else {var matches=[],callname=one.call.name;(callname||0).substring.call.a;for (var other_key in workspace){if (workspace.hasOwnProperty(key)){if ((key===other_key))continue;var other_stuff=workspace[other_key],other_lastname2fmarr=other_stuff.lastname2fmarr,other_fmarr=other_lastname2fmarr[callname],other_n=(other_fmarr&&(other_fmarr.length));if ((other_n===1)){if (one.fmCallMatch){throw new Error(((((((((('Ambiguous match for inline call "'+callname))+'" found between the 2 pieces: '))+(one.matchKey)))+'\n --- and --- \n'))+other_key));}(one.hasLocalMatch=false);(one.fmCallMatch=other_fmarr[0]);(one.matchKey=other_key);check_no_local_closure(one.fmCallMatch);} else if ((other_n===2)){throw new Error(((((('Ambiguous match for inline call "'+callname))+'" found within piece "'))+other_key));}}}}if (!one.fmCallMatch)throw new Error(((((('inline error: when inlining within a file, the source body must be visible to the target inline location. one.call.name: "'+(one.call.name)))+'", opt_code_info: '))+(JSON.stringify(opt_code_info))));var matchBegin=one.fmCallMatch.begin,matchEnd=one.fmCallMatch.end,argumentsArr=((cp.identifierObj['arguments'])||([]));if (argumentsArr.some(function (x){return (((matchBegin<=x))&&((x<matchEnd)));}))throw new Error('inline error: it is forbidden to use `arguments` in the body of the function to be inlined.');}var newcode=code;for(var i=inlineArr.length;i--;){var one=inlineArr[i],begin=one.begin,end=one.end;(newcode=((((newcode.substring(0,begin))+(inlineCode(getInlineCodeHygienic(cp.identifierObj,fm,one),workspace,null,error_inline_stack))))+(newcode.substring(end))));}return (workspace[key].newcode=newcode);}function getInlineInfo(o,ind,all,code){if (((o.name)!==INLINE))return;var v,identifier,call,args,oc_length=o.children.length,oc_0=o.children[0],oc_1=o.children[1],oc_2=o.children[2];if ((((((((oc_length===2))&&((((call=oc_0).type)===CALL))))&&((((args=oc_1).type)===BRACKET))))&&(((args.typebracket)===ROUND)))){return {o:o,ind:ind,inlinetype:CALL,call:call,args:args};}if ((((((((((((oc_length===3))&&((((identifier=oc_0).type)===IDENTIFIER))))&&((((call=oc_1).type)===CALL))))&&((((args=oc_2).type)===BRACKET))))&&(((args.typebracket)===ROUND))))&&(/=/.test(code.substring(identifier.end,call.begin))))){return {o:o,ind:ind,inlinetype:ASSIGN,identifier:identifier,call:call,args:args};}var vc;if ((((((((((((((((((oc_length===1))&&((((v=oc_0).type)===BRACKET))))&&(((v.typebracket)===VAR))))&&((((vc=v.children).length)===3))))&&((((identifier=vc[0]).type)===VARDECL))))&&((((call=vc[1]).type)===CALL))))&&((((args=vc[2]).type)===BRACKET))))&&(((args.typebracket)===ROUND))))&&(/=/.test(code.substring(identifier.end,call.begin))))){return {o:o,ind:ind,inlinetype:VARASSIGN,identifier:identifier,call:call,args:args};}throw new Error('Unrecognized inline syntax.');}function getInlineCodeHygienic(identifierObj,fm,one){var error;var fmScopePath=one.fmScopePath,fmCallMatch=one.fmCallMatch;if (((-1)<(fmScopePath.indexOf(fmCallMatch)))){if (('undefined'!==(typeof console)))console.error(((('Could not inline: self-recursion found for "'+(fmCallMatch.fullname)))+'".')); else if (('undefined'!==(typeof print)))print(((('[ERROR] Could not inline: self-recursion found for "'+(fmCallMatch.fullname)))+'".'));return one.str.substring(INLINE.length);}var io=Object.create(identifierObj);var undefN=getNewName('undef',io),retN=getNewName('ret',io),param_arr=fmCallMatch.param_arr,paramN_arr=param_arr.map(function (name){return getNewName(name,io);}),paramN_map=getMapping(param_arr,paramN_arr),vardeclArr=fmCallMatch.vardeclArr,varnameArr=vardeclArr.map(function (x){return x.name;}),vardeclN_arr=varnameArr.map(function (name){return getNewName(name,io);}),vardeclN_map=getMapping(varnameArr,vardeclN_arr),body=fmCallMatch.body,body_begin=fmCallMatch.body_node.begin,body_end=fmCallMatch.body_node.end,body_length=(body_end-body_begin),toReplace=[],body_cp=codeparse(body,CODEPARSE_OPT_BODY);for(var i=body_cp.identifierArr.length;i--;){var ident=body_cp.identifierArr[i],newstr=((paramN_map[ident.name])||(vardeclN_map[ident.name]));if (newstr)toReplace.push({o:ident,newstr:newstr});}for(var i=body_cp.callArr.length;i--;){var call=body_cp.callArr[i],newstr=((paramN_map[call.name])||(vardeclN_map[call.name]));if (newstr)toReplace.push({o:call,newstr:call.str.replace(call.name,newstr)});}for(var i=body_cp.bracketextraArr.length;i--;){var brack=body_cp.bracketextraArr[i];if (((brack.typebracket)!==RETURN))continue;toReplace.push({o:{begin:brack.begin,end:((brack.begin)+(RETURN.length))},newstr:(retN+' = ')});toReplace.push({o:{begin:brack.end,end:brack.end},newstr:' break;'});}toReplace.sort(function (a,b){var error;return (((a.o.begin)<(b.o.begin))?-1:(((a.o.end)>(b.o.end))?+1:error.bug));});var newbody=body;for(var i=toReplace.length;i--;){var r=toReplace[i];(newbody=((((newbody.substring(0,r.o.begin))+(r.newstr)))+(newbody.substring(r.o.end))));}var oas=one.args.sepSplit,set_args_arr=paramN_arr.map(function (pN,i){return ((((((('var '+pN))+' = '))+(((i<(oas.length))?oas[i].str:undefN))))+';');});var var_decl_undef_arr=[],var_decl_undef_set={};for(var n=body_cp.bracketextraArr.length,i=0;(i<n);i++){var brack=body_cp.bracketextraArr[i];if (((brack.typebracket)!==VAR))continue;var vdArr=brack.vdArr;for(var nj=vdArr.length,j=0;(j<nj);j++){var vd=vdArr[j];if (((!vd.rightstr)&&(!((vd.leftstr) in var_decl_undef_set)))){var_decl_undef_arr.push(((((vardeclN_map[vd.leftstr])+' = '))+undefN));(var_decl_undef_set[vd.leftstr]=1);}}}var bodyAlreadyCurly=/^\s*\{[\s\S]*?\}\s*$/.test(newbody);var newcode=['{',('//#INLINE_BEGIN: '+(one.str.replace(/\r\n/g,' ')))].concat([((((((('var '+undefN))+', '))+retN))+';')]).concat(['//#INLINE_SET_INPUT_ARGS:']).concat(set_args_arr).concat((var_decl_undef_arr.length?[((('var '+(var_decl_undef_arr.join(', '))))+';')]:[])).concat(['//#INLINE_IMPLEMENT:']).concat(['do {']).concat(newbody).concat(['} while (false);']).concat((((one.inlinetype)===CALL)?[]:(((one.inlinetype)===ASSIGN)?[((((((one.identifier.name)+' = '))+retN))+';')]:(((one.inlinetype)===VARASSIGN)?[((((((('var '+(one.identifier.name)))+' = '))+retN))+';')]:error.bug)))).concat([('//#INLINE_END: '+(one.str.replace(/\r\n/g,' ')))]).concat(['}']).join('\n');return newcode;}function getMapping(arr_in,arr_out){var ret={};for(var i=arr_in.length;i--;)(ret[arr_in[i]]=arr_out[i]);return ret;}function getNewName(name,io){var base=((('_'+name))+'_'),i='',newname;while ((((newname=(base+i))) in io))(i=((+i)+1));(io[newname]=1);return newname;}function getFmScopePath(fmtree,one,sofar){(sofar||((sofar=[])));for(var n=fmtree.length,i=0;(i<n);i++){var fm=fmtree[i];if (((((fm.begin)<=(one.begin)))&&(((one.end)<=(fm.end))))){sofar.push(fm);getFmScopePath(((fm.children)||([])),one,sofar);break;}}return sofar;}function getFmCallMatch(fmtree,one,fmScopePath){var callname=one.call.name,all=fmtree.concat(fmScopePath),match;top_loop:for(var i=all.length;i--;){var fm=all[i];var fmc=((fm.children)||([]));for(var j=fmc.length;j--;){var c=fmc[j];if (((c.lastname)===callname)){(match=c);break top_loop;}}if (((fm.lastname)===callname)){(match=fm);break top_loop;}}if (match)check_bound_variables_all_shared(match,fmScopePath.slice(-1)[0]);return match;}function check_no_local_closure(fm){var vuo=fm.varuseObj,vdo=fm.vardeclObj;for (var name in vuo){if (!(name in vdo)){var pFm=fm;while ((pFm=pFm.parent)){if ((name in (pFm.vardeclObj))){throw new Error('inline error: when inlining across files, the body to inline MUST NOT use locally bound variables (closures). (It may use globals, though.)');}}}}}function check_bound_variables_all_shared(match,target_inline_fm){var bound=[],m_vuo=match.varuseObj,m_vdo=match.vardeclObj,m_pset=match.param_set;for (var name in m_vuo){if (((!(name in m_vdo))&&(!(name in m_pset)))){bound.push(name);}}bound.forEach(check_declared_in_same_scope);function check_declared_in_same_scope(name){var m_decl_scope=decl_scope(name,match),t_decl_scope=decl_scope(name,target_inline_fm);if ((m_decl_scope!==t_decl_scope))throw new Error('inline error: when inlining within a file, the source body and the target inline location must share their bound variables (if the source body has any).');}function decl_scope(name,fm){return (fm?(fm.vardeclObj[name]?fm:decl_scope(name,fm.parent)):null);}}})(this);}var canInline=true;function need$Impl(path){if (has[path])return;(has[path]=1);var isJsm;if (/\.js$/.test(path))(isJsm=false); else if (/\.jsm$/.test(path))(isJsm=true); else throw new Error(((("need$: unknown type, only .js and .jsm are supported. Path: '"+path))+"'"));var code=need$.read(path);var rx_str="/need\\$\\s*\\(\\s*([\"\\'])([^\"\\']+)\\1/",rx_all=new RegExp(rx_str,"g"),rx_one=new RegExp(rx_str),need_all=code.match(/need\$\s*\(\s*(["\'])([^"\']+)\1/g);while ((need_all&&(need_all.length)))need$Impl(need_all.shift().match(/need\$\s*\(\s*(["\'])([^"\']+)\1/)[2]);if (isJsm){(code=jsm2js(code));if (canInline)(code=inlineCode(code,inline_workspace,{path:path}));}eval.call(global,code);}function xhrGetSync(path){var xhr=new XMLHttpRequest();xhr.open("GET",path,false);xhr.send();if (((((xhr.status)!==0))&&(((xhr.status)!==200))))throw new Error(((("need$:xhrGetSync: Could not load path '"+path))+"'"));return ((((xhr.responseText)+"\r\n//@ sourceURL="))+path);}})(this);}
